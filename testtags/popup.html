<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="styles/popup.css">
</head>
<body>
  <div class="container">
    <header class="header">
      <h1>
        <img src="icons/icon48.png" alt="CloudHub" style="width: 24px; height: 24px; margin-right: 8px; vertical-align: middle;">
        CloudHub
      </h1>
      <div class="sync-status">
        <span id="last-sync">Last sync: --</span>
        <button id="refresh-btn" class="btn-icon">
          <img src="icons/refresh-icon.png" alt="Refresh" style="width: 16px; height: 16px;">
        </button>
      </div>
    </header>

    <nav class="tabs">
      <button class="tab active" data-tab="dashboard">Dashboard</button>
      <button class="tab" data-tab="credentials">Credentials</button>
      <button class="tab" data-tab="settings">Settings</button>
    </nav>

    <main class="content">
      <!-- Dashboard Tab -->
      <div id="dashboard-tab" class="tab-content active">
        <div class="cloud-providers">
          <div class="provider aws" data-provider="aws">
            <div class="provider-header">
              <img src="icons/aws-icon.png" alt="AWS" class="provider-icon-img" style="width: 20px; height: 20px; margin-right: 6px;">
              <span class="provider-name">AWS</span>
            </div>
            <div class="provider-stats">
              <span class="stat">EC2: <span id="aws-ec2-count">-</span></span>
              <span class="stat cost-stat">
                Cost: $<span id="aws-cost">-</span>
                <div class="cost-tooltip">Estimated based on actual instance types and AWS pricing</div>
              </span>
            </div>
          </div>

          <div class="provider gcp" data-provider="gcp">
            <div class="provider-header">
              <img src="icons/gcp-icon.png" alt="GCP" class="provider-icon-img" style="width: 20px; height: 20px; margin-right: 6px;">
              <span class="provider-name">GCP</span>
            </div>
            <div class="provider-stats">
              <span class="stat">Compute: <span id="gcp-compute-count">-</span></span>
              <span class="stat cost-stat">
                Cost: $<span id="gcp-cost">-</span>
                <div class="cost-tooltip">Estimated based on actual machine types and GCP pricing</div>
              </span>
            </div>
          </div>

          <div class="provider azure" data-provider="azure">
            <div class="provider-header">
              <img src="icons/azure-icon.png" alt="Azure" class="provider-icon-img" style="width: 20px; height: 20px; margin-right: 6px;">
              <span class="provider-name">Azure</span>
            </div>
            <div class="provider-stats">
              <span class="stat">VMs: <span id="azure-vm-count">-</span></span>
              <span class="stat cost-stat">
                Cost: $<span id="azure-cost">-</span>
                <div class="cost-tooltip">Estimated based on actual VM sizes and Azure pricing</div>
              </span>
            </div>
          </div>

          <div class="provider digitalocean" data-provider="digitalocean">
            <div class="provider-header">
              <img src="icons/digitalocean-icon.png" alt="DigitalOcean" class="provider-icon-img" style="width: 20px; height: 20px; margin-right: 6px;">
              <span class="provider-name">DigitalOcean</span>
            </div>
            <div class="provider-stats">
              <span class="stat">Droplets: <span id="do-droplet-count">-</span></span>
              <span class="stat cost-stat">
                Cost: $<span id="do-cost">-</span>
                <div class="cost-tooltip">Real month-to-date usage from DigitalOcean billing API</div>
              </span>
            </div>
          </div>
        </div>


        <div class="quick-actions">
          <button id="launch-instance" class="btn-primary">Quick Launch</button>
          <button id="cost-alert" class="btn-secondary">Cost Alerts</button>
          <button id="security-scan" class="btn-secondary">Security Scan</button>
        </div>
      </div>

      <!-- Credentials Tab -->
      <div id="credentials-tab" class="tab-content">
        <div class="credentials-form">
          <h3>Cloud Provider Credentials</h3>
          
          <div class="credential-section" id="aws-credential-section">
            <div class="credential-header">
              <img src="icons/aws-credentials-icon.png" alt="AWS" style="width: calc(100% - 32px); height: auto; max-height: 32px; object-fit: contain;">
              <span class="credential-status" id="aws-credential-status"></span>
            </div>
            <div class="credential-inputs" id="aws-inputs">
              <input type="text" id="aws-access-key" placeholder="Access Key ID" class="input-field">
              <input type="password" id="aws-secret-key" placeholder="Secret Access Key" class="input-field">
              <input type="text" id="aws-region" placeholder="Region (optional - will scan all regions if empty)" class="input-field">
              <button id="save-aws" class="btn-save">
                <span class="btn-text">Save AWS Credentials</span>
                <span class="btn-loading" style="display: none;">⟳ Saving...</span>
              </button>
            </div>
            <div class="credential-saved" id="aws-saved" style="display: none;">
              <div class="saved-info">
                <div class="saved-content">
                  <img src="icons/success-icon.png" alt="Success" class="saved-icon" style="width: 16px; height: 16px;">
                  <div class="saved-text">
                    <div class="saved-title">AWS credentials configured</div>
                    <div class="saved-subtitle">Ready to manage EC2 instances</div>
                  </div>
                </div>
                <div class="credential-actions">
                  <button class="btn-edit" id="aws-edit">
                    <img src="icons/edit-icon.png" alt="Edit" style="width: 14px; height: 14px; margin-right: 4px;">
                    Edit
                  </button>
                </div>
              </div>
            </div>
          </div>

          <div class="credential-section" id="gcp-credential-section">
            <div class="credential-header">
              <img src="icons/gcp-credentials-icon.png" alt="Google Cloud" style="width: calc(100% - 32px); height: auto; max-height: 32px; object-fit: contain;">
              <span class="credential-status" id="gcp-credential-status"></span>
            </div>
            <div class="credential-inputs" id="gcp-inputs">
              <textarea id="gcp-service-account" placeholder="Service Account JSON" class="textarea-field"></textarea>
              <input type="text" id="gcp-project" placeholder="Project ID" class="input-field">
              <button id="save-gcp" class="btn-save">
                <span class="btn-text">Save GCP Credentials</span>
                <span class="btn-loading" style="display: none;">⟳ Saving...</span>
              </button>
            </div>
            <div class="credential-saved" id="gcp-saved" style="display: none;">
              <div class="saved-info">
                <div class="saved-content">
                  <img src="icons/success-icon.png" alt="Success" class="saved-icon" style="width: 16px; height: 16px;">
                  <div class="saved-text">
                    <div class="saved-title">GCP credentials configured</div>
                    <div class="saved-subtitle">Ready to manage Compute Engine</div>
                  </div>
                </div>
                <div class="credential-actions">
                  <button class="btn-edit" id="gcp-edit">
                    <img src="icons/edit-icon.png" alt="Edit" style="width: 14px; height: 14px; margin-right: 4px;">
                    Edit
                  </button>
                </div>
              </div>
            </div>
          </div>

          <div class="credential-section" id="azure-credential-section">
            <div class="credential-header">
              <img src="icons/azure-credentials-icon.png" alt="Azure" style="width: calc(100% - 32px); height: auto; max-height: 32px; object-fit: contain;">
              <span class="credential-status" id="azure-credential-status"></span>
            </div>
            <div class="credential-inputs" id="azure-inputs">
              <input type="text" id="azure-client-id" placeholder="Client ID" class="input-field">
              <input type="password" id="azure-client-secret" placeholder="Client Secret" class="input-field">
              <input type="text" id="azure-tenant-id" placeholder="Tenant ID" class="input-field">
              <input type="text" id="azure-subscription-id" placeholder="Subscription ID" class="input-field">
              <button id="save-azure" class="btn-save">
                <span class="btn-text">Save Azure Credentials</span>
                <span class="btn-loading" style="display: none;">⟳ Saving...</span>
              </button>
            </div>
            <div class="credential-saved" id="azure-saved" style="display: none;">
              <div class="saved-info">
                <div class="saved-content">
                  <img src="icons/success-icon.png" alt="Success" class="saved-icon" style="width: 16px; height: 16px;">
                  <div class="saved-text">
                    <div class="saved-title">Azure credentials configured</div>
                    <div class="saved-subtitle">Ready to manage Virtual Machines</div>
                  </div>
                </div>
                <div class="credential-actions">
                  <button class="btn-edit" id="azure-edit">
                    <img src="icons/edit-icon.png" alt="Edit" style="width: 14px; height: 14px; margin-right: 4px;">
                    Edit
                  </button>
                </div>
              </div>
            </div>
          </div>

          <div class="credential-section" id="do-credential-section">
            <div class="credential-header">
              <img src="icons/digitalocean-credentials-icon.png" alt="DigitalOcean" style="width: calc(100% - 32px); height: auto; max-height: 32px; object-fit: contain;">
              <span class="credential-status" id="do-credential-status"></span>
            </div>
            <div class="credential-inputs" id="do-inputs">
              <input type="password" id="do-token" placeholder="Personal Access Token" class="input-field">
              <button id="save-do" class="btn-save">
                <span class="btn-text">Save DO Credentials</span>
                <span class="btn-loading" style="display: none;">⟳ Saving...</span>
              </button>
            </div>
            <div class="credential-saved" id="do-saved" style="display: none;">
              <div class="saved-info">
                <div class="saved-content">
                  <img src="icons/success-icon.png" alt="Success" class="saved-icon" style="width: 16px; height: 16px;">
                  <div class="saved-text">
                    <div class="saved-title">DigitalOcean credentials configured</div>
                    <div class="saved-subtitle">Ready to manage Droplets</div>
                  </div>
                </div>
                <div class="credential-actions">
                  <button class="btn-edit" id="do-edit">
                    <img src="icons/edit-icon.png" alt="Edit" style="width: 14px; height: 14px; margin-right: 4px;">
                    Edit
                  </button>
                  <button class="btn-reauth" id="do-reauth">Refresh</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Settings Tab -->
      <div id="settings-tab" class="tab-content">
        <div class="settings-form">
          <h3>Extension Settings</h3>
          
          <div class="setting-item">
            <label>
              <input type="checkbox" id="auto-refresh"> Auto-refresh every 5 minutes
            </label>
          </div>
          
          <div class="setting-item">
            <label>
              <input type="checkbox" id="cost-notifications"> Cost alert notifications
            </label>
          </div>
          
          <div class="setting-item">
            <label>
              <input type="checkbox" id="security-notifications"> Security alert notifications
            </label>
          </div>
          
          <div class="setting-item">
            <label for="ssh-method">SSH Connection Method:</label>
            <select id="ssh-method" class="select-field">
              <option value="clipboard">Copy to Clipboard</option>
              <option value="terminal">Launch Terminal</option>
              <option value="browser">Browser SSH Client</option>
            </select>
          </div>

          <div class="setting-item">
            <label for="aws-os-user">AWS EC2 Default OS User:</label>
            <input type="text" id="aws-os-user" class="input-field" placeholder="ubuntu" value="ubuntu">
            <small class="setting-help">Default OS user for AWS EC2 Instance Connect (ubuntu, ec2-user, admin, etc.)</small>
          </div>

          <button id="export-data" class="btn-secondary">Export Data</button>
          <button id="clear-data" class="btn-danger">Clear All Data</button>
        </div>
      </div>
    </main>
  </div>

  <script src="popup.js"></script>
</body>
</html>