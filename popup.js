/*! For license information please see popup.js.LICENSE.txt */
(()=>{function e(n){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(n)}function n(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var o,a,r,i,c=[],s=!0,d=!1;try{if(r=(t=t.call(e)).next,0===n){if(Object(t)!==t)return;s=!1}else for(;!(s=(o=r.call(t)).done)&&(c.push(o.value),c.length!==n);s=!0);}catch(e){d=!0,a=e}finally{try{if(!s&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(d)throw a}}return c}}(e,n)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var o={}.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?t(e,n):void 0}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,o=Array(n);t<n;t++)o[t]=e[t];return o}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,o)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach(function(n){r(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function r(e,n,t){return(n=u(n))in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(){var e,n,t="function"==typeof Symbol?Symbol:{},o=t.iterator||"@@iterator",a=t.toStringTag||"@@toStringTag";function r(t,o,a,r){var i=o&&o.prototype instanceof d?o:d,l=Object.create(i.prototype);return c(l,"_invoke",function(t,o,a){var r,i,c,d=0,l=a||[],u=!1,p={p:0,n:0,v:e,a:g,f:g.bind(e,4),d:function(n,t){return r=n,i=0,c=e,p.n=t,s}};function g(t,o){for(i=t,c=o,n=0;!u&&d&&!a&&n<l.length;n++){var a,r=l[n],g=p.p,f=r[2];t>3?(a=f===o)&&(c=r[(i=r[4])?5:(i=3,3)],r[4]=r[5]=e):r[0]<=g&&((a=t<2&&g<r[1])?(i=0,p.v=o,p.n=r[1]):g<f&&(a=t<3||r[0]>o||o>f)&&(r[4]=t,r[5]=o,p.n=f,i=0))}if(a||t>1)return s;throw u=!0,o}return function(a,l,f){if(d>1)throw TypeError("Generator is already running");for(u&&1===l&&g(l,f),i=l,c=f;(n=i<2?e:c)||!u;){r||(i?i<3?(i>1&&(p.n=-1),g(i,c)):p.n=c:p.v=c);try{if(d=2,r){if(i||(a="next"),n=r[a]){if(!(n=n.call(r,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,i<2&&(i=0)}else 1===i&&(n=r.return)&&n.call(r),i<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),i=1);r=e}else if((n=(u=p.n<0)?c:t.call(o,p))!==s)break}catch(n){r=e,i=1,c=n}finally{d=1}}return{value:n,done:u}}}(t,a,r),!0),l}var s={};function d(){}function l(){}function u(){}n=Object.getPrototypeOf;var p=[][o]?n(n([][o]())):(c(n={},o,function(){return this}),n),g=u.prototype=d.prototype=Object.create(p);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,c(e,a,"GeneratorFunction")),e.prototype=Object.create(g),e}return l.prototype=u,c(g,"constructor",u),c(u,"constructor",l),l.displayName="GeneratorFunction",c(u,a,"GeneratorFunction"),c(g),c(g,a,"Generator"),c(g,o,function(){return this}),c(g,"toString",function(){return"[object Generator]"}),(i=function(){return{w:r,m:f}})()}function c(e,n,t,o){var a=Object.defineProperty;try{a({},"",{})}catch(e){a=0}c=function(e,n,t,o){function r(n,t){c(e,n,function(e){return this._invoke(n,t,e)})}n?a?a(e,n,{value:t,enumerable:!o,configurable:!o,writable:!o}):e[n]=t:(r("next",0),r("throw",1),r("return",2))},c(e,n,t,o)}function s(e,n,t,o,a,r,i){try{var c=e[r](i),s=c.value}catch(e){return void t(e)}c.done?n(s):Promise.resolve(s).then(o,a)}function d(e){return function(){var n=this,t=arguments;return new Promise(function(o,a){var r=e.apply(n,t);function i(e){s(r,o,a,i,c,"next",e)}function c(e){s(r,o,a,i,c,"throw",e)}i(void 0)})}}function l(e,n){for(var t=0;t<n.length;t++){var o=n[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,u(o.key),o)}}function u(n){var t=function(n){if("object"!=e(n)||!n)return n;var t=n[Symbol.toPrimitive];if(void 0!==t){var o=t.call(n,"string");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(n)}(n);return"symbol"==e(t)?t:t+""}console.log("[CloudHub] popup.js is loading...");var p=function(){return e=function e(){!function(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),console.log("[CloudHub] CloudHubPopup constructor called"),this.currentTab="dashboard",this.providers=["aws","gcp","azure","digitalocean"],this.init()},t=[{key:"init",value:function(){this.initializeProviderStates(),this.setupEventListeners(),this.loadSettings(),this.loadCredentials(),this.refreshDashboard()}},{key:"initializeProviderStates",value:function(){var e=this;this.providers.forEach(function(n){e.setProviderConfiguredState(n,!1)})}},{key:"setupEventListeners",value:function(){var e=this;console.log("[CloudHub] Setting up event listeners..."),document.querySelectorAll(".tab").forEach(function(n){n.addEventListener("click",function(n){e.switchTab(n.target.dataset.tab)})}),document.getElementById("refresh-btn").addEventListener("click",function(){e.refreshDashboard()}),document.querySelectorAll(".provider").forEach(function(n){n.addEventListener("click",function(n){var t=n.currentTarget.dataset.provider;e.showProviderDetails(t)})}),document.getElementById("launch-instance").addEventListener("click",function(){e.showLaunchDialog()}),document.getElementById("cost-alert").addEventListener("click",function(){e.showCostAlerts()}),document.getElementById("security-scan").addEventListener("click",function(){e.runSecurityScan()}),console.log("[CloudHub] Setting up save button listeners..."),document.getElementById("save-aws").addEventListener("click",function(){console.log("[CloudHub] AWS save button clicked!"),e.saveCredentials("aws")}),document.getElementById("save-gcp").addEventListener("click",function(){e.saveCredentials("gcp")}),document.getElementById("save-azure").addEventListener("click",function(){e.saveCredentials("azure")}),document.getElementById("save-do").addEventListener("click",function(){e.saveCredentials("digitalocean")}),document.getElementById("aws-edit").addEventListener("click",function(){e.setCredentialSavedState("aws",!1)}),document.getElementById("gcp-edit").addEventListener("click",function(){e.setCredentialSavedState("gcp",!1)}),document.getElementById("azure-edit").addEventListener("click",function(){e.setCredentialSavedState("azure",!1)}),document.getElementById("do-edit").addEventListener("click",function(){e.setCredentialSavedState("digitalocean",!1)}),document.getElementById("do-reauth").addEventListener("click",function(){e.reauthenticateDigitalOcean()}),document.getElementById("auto-refresh").addEventListener("change",function(n){e.updateSetting("autoRefresh",n.target.checked)}),document.getElementById("cost-notifications").addEventListener("change",function(n){e.updateSetting("costNotifications",n.target.checked)}),document.getElementById("security-notifications").addEventListener("change",function(n){e.updateSetting("securityNotifications",n.target.checked)}),document.getElementById("ssh-method").addEventListener("change",function(n){e.updateSetting("sshMethod",n.target.value)}),document.getElementById("aws-os-user").addEventListener("input",function(n){e.updateSetting("awsOsUser",n.target.value||"ubuntu")}),document.getElementById("export-data").addEventListener("click",function(){e.exportData()}),document.getElementById("clear-data").addEventListener("click",function(){e.clearAllData()})}},{key:"switchTab",value:function(e){document.querySelectorAll(".tab").forEach(function(e){return e.classList.remove("active")}),document.querySelectorAll(".tab-content").forEach(function(e){return e.classList.remove("active")}),document.querySelector('[data-tab="'.concat(e,'"]')).classList.add("active"),document.getElementById("".concat(e,"-tab")).classList.add("active"),this.currentTab=e}},{key:"refreshDashboard",value:(h=d(i().m(function e(){var n,t,o;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return(n=document.getElementById("refresh-btn")).textContent="⟳",n.disabled=!0,e.p=1,e.n=2,chrome.runtime.sendMessage({action:"refreshAllProviders"});case 2:(t=e.v).success?(this.updateDashboard(t.data),this.updateLastSync()):console.error("Failed to refresh dashboard:",t.error),e.n=4;break;case 3:e.p=3,o=e.v,console.error("Error refreshing dashboard:",o);case 4:return e.p=4,n.innerHTML='<img src="icons/refresh-icon.png" alt="Refresh" style="width: 16px; height: 16px;">',n.disabled=!1,e.f(4);case 5:return e.a(2)}},e,this,[[1,3,4,5]])})),function(){return h.apply(this,arguments)})},{key:"updateDashboard",value:function(e){var n=this;this.providers.forEach(function(t){var o=e[t];o&&n.updateProviderStats(t,o)})}},{key:"updateProviderStats",value:function(e,n){var t=n.resources?this.calculateEnhancedCost(e,n.resources):"0.00";switch(e){case"aws":document.getElementById("aws-ec2-count").textContent=n.ec2Count||"-",document.getElementById("aws-cost").textContent="0.00"!==t?t:n.estimatedCost||"-";break;case"gcp":document.getElementById("gcp-compute-count").textContent=n.computeCount||"-",document.getElementById("gcp-cost").textContent="0.00"!==t?t:n.estimatedCost||"-";break;case"azure":document.getElementById("azure-vm-count").textContent=n.vmCount||"-",document.getElementById("azure-cost").textContent="0.00"!==t?t:n.estimatedCost||"-";break;case"digitalocean":document.getElementById("do-droplet-count").textContent=n.dropletCount||"-",document.getElementById("do-cost").textContent=n.realCost||n.estimatedCost||("0.00"!==t?t:"-")}}},{key:"saveCredentials",value:(v=d(i().m(function e(n){var t,o,r,c;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:if(console.log("[CloudHub] Starting credential save for ".concat(n)),t=this.getCredentialInputs(n),console.log("[CloudHub] Credentials collected for ".concat(n,":"),a(a({},t),{},{accessKeyId:t.accessKeyId?"".concat(t.accessKeyId.slice(0,8),"..."):void 0,secretAccessKey:t.secretAccessKey?"***":void 0,token:t.token?"***":void 0})),this.setCredentialLoadingState(n,!0),console.log("[CloudHub] Set loading state for ".concat(n)),e.p=1,console.log("[CloudHub] Sending saveCredentials message for ".concat(n)),chrome.runtime){e.n=2;break}throw new Error("chrome.runtime is not available");case 2:return console.log("[CloudHub] chrome.runtime is available, sending message..."),e.n=3,chrome.runtime.sendMessage({action:"saveCredentials",provider:n,credentials:t});case 3:if(o=e.v,console.log("[CloudHub] Save response for ".concat(n,":"),o),o){e.n=4;break}throw new Error("No response received from background script");case 4:if(!o.success){e.n=6;break}return console.log("[CloudHub] Credentials saved successfully for ".concat(n,", testing connection...")),e.n=5,this.testConnection(n);case 5:r=e.v,console.log("[CloudHub] Connection test result for ".concat(n,":"),r),r&&r.success?(console.log("[CloudHub] Connection test passed for ".concat(n,", showing saved state")),this.setCredentialSavedState(n,!0),this.setProviderConfiguredState(n,!0),this.showNotification("".concat(n.toUpperCase()," credentials saved and verified"),"success")):(console.log("[CloudHub] Connection test failed for ".concat(n,", but credentials are saved")),this.setCredentialLoadingState(n,!1),this.setCredentialSavedState(n,!0),this.setProviderConfiguredState(n,!1),this.showNotification("".concat(n.toUpperCase()," credentials saved (connection test failed - check credentials)"),"warning")),e.n=7;break;case 6:console.error("[CloudHub] Failed to save credentials for ".concat(n,":"),o.error),this.setCredentialLoadingState(n,!1),this.showNotification("Failed to save ".concat(n," credentials: ").concat(o.error),"error");case 7:e.n=9;break;case 8:e.p=8,c=e.v,console.error("[CloudHub] Error saving credentials for ".concat(n,":"),c),console.error("[CloudHub] Error stack:",c.stack),this.setCredentialLoadingState(n,!1),this.showNotification("Error saving credentials","error");case 9:console.log("[CloudHub] saveCredentials function completed for ".concat(n));case 10:return e.a(2)}},e,this,[[1,8]])})),function(e){return v.apply(this,arguments)})},{key:"setCredentialLoadingState",value:function(e,n){var t=document.getElementById("save-".concat("digitalocean"===e?"do":e)),o=t.querySelector(".btn-text"),a=t.querySelector(".btn-loading");n?(t.disabled=!0,o.style.display="none",a.style.display="inline"):(t.disabled=!1,o.style.display="inline",a.style.display="none")}},{key:"setCredentialSavedState",value:function(e,n){var t="digitalocean"===e?"do":e,o=document.getElementById("".concat(t,"-inputs")),a=document.getElementById("".concat(t,"-saved"));n?(o.style.display="none",a.style.display="block",this.clearCredentialInputs(e)):(o.style.display="block",a.style.display="none",this.setProviderConfiguredState(e,!1))}},{key:"clearCredentialInputs",value:function(e){switch(e){case"aws":document.getElementById("aws-access-key").value="",document.getElementById("aws-secret-key").value="";break;case"gcp":document.getElementById("gcp-service-account").value="";break;case"azure":document.getElementById("azure-client-secret").value="";break;case"digitalocean":document.getElementById("do-token").value=""}}},{key:"setProviderConfiguredState",value:function(e,n){var t=document.querySelector('.provider[data-provider="'.concat(e,'"]'));t&&(t.classList.remove("provider-configured","provider-unconfigured"),n?t.classList.add("provider-configured"):t.classList.add("provider-unconfigured"))}},{key:"getCredentialInputs",value:function(e){switch(e){case"aws":return{accessKeyId:document.getElementById("aws-access-key").value,secretAccessKey:document.getElementById("aws-secret-key").value,region:document.getElementById("aws-region").value||""};case"gcp":return{serviceAccount:document.getElementById("gcp-service-account").value,projectId:document.getElementById("gcp-project").value};case"azure":return{clientId:document.getElementById("azure-client-id").value,clientSecret:document.getElementById("azure-client-secret").value,tenantId:document.getElementById("azure-tenant-id").value,subscriptionId:document.getElementById("azure-subscription-id").value};case"digitalocean":return{token:document.getElementById("do-token").value};default:return{}}}},{key:"testConnection",value:(m=d(i().m(function e(n){var t,o;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,chrome.runtime.sendMessage({action:"testConnection",provider:n});case 1:return t=e.v,e.a(2,t);case 2:return e.p=2,o=e.v,console.error("Error testing connection:",o),e.a(2,{success:!1,error:o.message})}},e,null,[[0,2]])})),function(e){return m.apply(this,arguments)})},{key:"loadCredentials",value:(b=d(i().m(function e(){var n,t,o,a;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return console.log("[CloudHub] Loading saved credentials..."),e.p=1,e.n=2,chrome.storage.local.get(["credentials","credentialMetadata"]);case 2:n=e.v,t=n.credentials||{},o=n.credentialMetadata||{},console.log("[CloudHub] Found credentials in storage:",Object.keys(t)),console.log("[CloudHub] Found metadata in storage:",Object.keys(o)),t.aws&&(t.aws.accessKeyId||t.aws.secretAccessKey)&&(console.log("[CloudHub] Found AWS credentials, showing saved state"),this.setCredentialSavedState("aws",!0),this.setProviderConfiguredState("aws",!0),o.aws&&o.aws.region&&(document.getElementById("aws-region").value=o.aws.region)),t.gcp&&(t.gcp.serviceAccount||t.gcp.projectId)&&(console.log("[CloudHub] Found GCP credentials, showing saved state"),this.setCredentialSavedState("gcp",!0),this.setProviderConfiguredState("gcp",!0),o.gcp&&o.gcp.projectId&&(document.getElementById("gcp-project").value=o.gcp.projectId)),t.azure&&(t.azure.clientId||t.azure.clientSecret)&&(console.log("[CloudHub] Found Azure credentials, showing saved state"),this.setCredentialSavedState("azure",!0),this.setProviderConfiguredState("azure",!0),o.azure&&(o.azure.tenantId&&(document.getElementById("azure-tenant-id").value=o.azure.tenantId),o.azure.subscriptionId&&(document.getElementById("azure-subscription-id").value=o.azure.subscriptionId))),t.digitalocean&&t.digitalocean.token&&(console.log("[CloudHub] Found DigitalOcean credentials, showing saved state"),this.setCredentialSavedState("digitalocean",!0),this.setProviderConfiguredState("digitalocean",!0)),console.log("[CloudHub] Finished loading credentials"),e.n=4;break;case 3:e.p=3,a=e.v,console.error("[CloudHub] Error loading credentials:",a);case 4:return e.a(2)}},e,this,[[1,3]])})),function(){return b.apply(this,arguments)})},{key:"loadSettings",value:(f=d(i().m(function e(){var n,t,o;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,chrome.storage.local.get(["settings"]);case 1:n=e.v,t=n.settings||{},document.getElementById("auto-refresh").checked=!1!==t.autoRefresh,document.getElementById("cost-notifications").checked=!1!==t.costNotifications,document.getElementById("security-notifications").checked=!1!==t.securityNotifications,document.getElementById("ssh-method").value=t.sshMethod||"clipboard",document.getElementById("aws-os-user").value=t.awsOsUser||"ubuntu",e.n=3;break;case 2:e.p=2,o=e.v,console.error("Error loading settings:",o);case 3:return e.a(2)}},e,null,[[0,2]])})),function(){return f.apply(this,arguments)})},{key:"updateSetting",value:(g=d(i().m(function e(n,t){var o,a,r;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,chrome.storage.local.get(["settings"]);case 1:return o=e.v,(a=o.settings||{})[n]=t,e.n=2,chrome.storage.local.set({settings:a});case 2:chrome.runtime.sendMessage({action:"updateSetting",key:n,value:t}),e.n=4;break;case 3:e.p=3,r=e.v,console.error("Error updating setting:",r);case 4:return e.a(2)}},e,null,[[0,3]])})),function(e,n){return g.apply(this,arguments)})},{key:"updateLastSync",value:function(){var e=(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});document.getElementById("last-sync").textContent="Last sync: ".concat(e)}},{key:"showNotification",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",t=document.createElement("div");t.className="notification notification-".concat(n),t.textContent=e,t.style.cssText="\n      position: fixed;\n      top: 10px;\n      right: 10px;\n      background: ".concat("success"===n?"#28a745":"error"===n?"#dc3545":"#007bff",";\n      color: white;\n      padding: 12px 16px;\n      border-radius: 4px;\n      font-size: 13px;\n      z-index: 1000;\n      animation: slideIn 0.3s ease;\n    "),document.body.appendChild(t),setTimeout(function(){t.remove()},3e3)}},{key:"reauthenticateDigitalOcean",value:function(){chrome.tabs.create({url:"https://cloud.digitalocean.com/login",active:!0}),this.showNotification("DigitalOcean login page opened for reauthentication","info")}},{key:"showLaunchDialog",value:function(){var e=this,n=document.createElement("div");n.innerHTML='\n      <div style="\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0,0,0,0.5);\n        z-index: 10001;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n      " id="launch-modal">\n        <div style="\n          background: white;\n          border-radius: 8px;\n          padding: 20px;\n          max-width: 400px;\n          width: 90%;\n          font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, sans-serif;\n        ">\n          <h3 style="margin: 0 0 16px 0;">Quick Launch Instance</h3>\n          <select id="launch-provider" style="width: 100%; margin-bottom: 12px; padding: 8px;">\n            <option value="aws">AWS EC2</option>\n            <option value="gcp">Google Cloud Compute</option>\n            <option value="azure">Azure VM</option>\n            <option value="digitalocean">DigitalOcean Droplet</option>\n          </select>\n          <input type="text" id="instance-name" placeholder="Instance name" style="width: 100%; margin-bottom: 12px; padding: 8px; box-sizing: border-box;">\n          <select id="instance-size" style="width: 100%; margin-bottom: 16px; padding: 8px;">\n            <option value="small">Small (1 CPU, 1GB RAM)</option>\n            <option value="medium">Medium (2 CPU, 4GB RAM)</option>\n            <option value="large">Large (4 CPU, 8GB RAM)</option>\n          </select>\n          <div style="display: flex; gap: 10px;">\n            <button id="launch-btn" style="\n              background: #667eea;\n              color: white;\n              border: none;\n              padding: 10px 20px;\n              border-radius: 4px;\n              cursor: pointer;\n              flex: 1;\n            ">Launch</button>\n            <button id="launch-cancel-btn" style="\n              background: #6c757d;\n              color: white;\n              border: none;\n              padding: 10px 20px;\n              border-radius: 4px;\n              cursor: pointer;\n              flex: 1;\n            ">Cancel</button>\n          </div>\n        </div>\n      </div>\n    ',document.body.appendChild(n),document.getElementById("launch-btn").addEventListener("click",function(){var t=document.getElementById("launch-provider").value,o=document.getElementById("instance-name").value,a=document.getElementById("instance-size").value;o?(e.launchInstance(t,o,a),n.remove()):alert("Please enter an instance name")}),document.getElementById("launch-cancel-btn").addEventListener("click",function(){n.remove()})}},{key:"showCostAlerts",value:(p=d(i().m(function e(){var t,o,a,r,c,s=this;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return t=0,o=[],e.p=1,e.n=2,chrome.runtime.sendMessage({action:"refreshAllProviders"});case 2:(a=e.v).success&&Object.entries(a.data).forEach(function(e){var a=n(e,2),r=a[0],i=a[1],c=i.resources?s.calculateEnhancedCost(r,i.resources):"0.00",d=parseFloat(c)||parseFloat(i.estimatedCost)||0;t+=d,d>0&&o.push({provider:r.toUpperCase(),cost:d.toFixed(2)})}),e.n=4;break;case 3:e.p=3,c=e.v,console.error("Error getting cost data:",c);case 4:(r=document.createElement("div")).innerHTML='\n      <div style="\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0,0,0,0.5);\n        z-index: 10001;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n      " id="cost-modal">\n        <div style="\n          background: white;\n          border-radius: 8px;\n          padding: 20px;\n          max-width: 400px;\n          width: 90%;\n          font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, sans-serif;\n        ">\n          <h3 style="margin: 0 0 16px 0;">💰 Cost Alerts</h3>\n          <div style="margin-bottom: 16px;">\n            <h4 style="margin: 0 0 8px 0; font-size: 14px;">Current Month Estimate</h4>\n            <div style="font-size: 24px; color: #28a745; font-weight: bold;">$'.concat(t.toFixed(2),'</div>\n            <div style="font-size: 12px; color: #666;">').concat(t>0?"Based on current resource usage":"No active resources detected","</div>\n          </div>\n          ").concat(o.length>0?'\n          <div style="margin-bottom: 16px;">\n            <h4 style="margin: 0 0 8px 0; font-size: 14px;">Cost Breakdown</h4>\n            '.concat(o.map(function(e){return'<div style="font-size: 12px; margin-bottom: 4px;">• '.concat(e.provider,": $").concat(e.cost,"</div>")}).join(""),"\n          </div>"):"",'\n          <div style="margin-bottom: 16px;">\n            <label style="display: block; margin-bottom: 8px; font-size: 14px;">Monthly Alert Threshold ($)</label>\n            <input type="number" id="cost-threshold" value="200" style="width: 100%; padding: 8px; box-sizing: border-box;">\n          </div>\n          <div style="display: flex; gap: 10px;">\n            <button id="cost-save-btn" style="\n              background: #667eea;\n              color: white;\n              border: none;\n              padding: 10px 20px;\n              border-radius: 4px;\n              cursor: pointer;\n              flex: 1;\n            ">Save Alert</button>\n            <button id="cost-close-btn" style="\n              background: #6c757d;\n              color: white;\n              border: none;\n              padding: 10px 20px;\n              border-radius: 4px;\n              cursor: pointer;\n              flex: 1;\n            ">Close</button>\n          </div>\n        </div>\n      </div>\n    '),document.body.appendChild(r),document.getElementById("cost-save-btn").addEventListener("click",function(){var e=document.getElementById("cost-threshold").value;s.updateSetting("costThreshold",e),s.showNotification("Cost alert set to $".concat(e,"/month"),"success"),r.remove()}),document.getElementById("cost-close-btn").addEventListener("click",function(){r.remove()});case 5:return e.a(2)}},e,null,[[1,3]])})),function(){return p.apply(this,arguments)})},{key:"runSecurityScan",value:function(){this.showNotification("Running security scan...","info"),setTimeout(function(){var e=document.createElement("div");e.innerHTML='\n        <div style="\n          position: fixed;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          background: rgba(0,0,0,0.5);\n          z-index: 10001;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n        " id="security-modal">\n          <div style="\n            background: white;\n            border-radius: 8px;\n            padding: 20px;\n            max-width: 500px;\n            width: 90%;\n            font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, sans-serif;\n          ">\n            <h3 style="margin: 0 0 16px 0;">🔒 Security Scan Results</h3>\n            <div style="margin-bottom: 16px;">\n              <div style="display: flex; align-items: center; margin-bottom: 8px;">\n                <span style="color: #dc3545; margin-right: 8px;">⚠️</span>\n                <span style="font-size: 14px;">3 High priority issues found</span>\n              </div>\n              <div style="display: flex; align-items: center; margin-bottom: 8px;">\n                <span style="color: #ffc107; margin-right: 8px;">⚠️</span>\n                <span style="font-size: 14px;">7 Medium priority issues found</span>\n              </div>\n              <div style="display: flex; align-items: center; margin-bottom: 16px;">\n                <span style="color: #28a745; margin-right: 8px;">✅</span>\n                <span style="font-size: 14px;">12 Security best practices followed</span>\n              </div>\n            </div>\n            <div style="margin-bottom: 16px;">\n              <h4 style="margin: 0 0 8px 0; font-size: 14px; color: #dc3545;">Critical Issues:</h4>\n              <div style="font-size: 12px; margin-bottom: 4px; padding: 8px; background: #f8f9fa; border-radius: 4px;">• Security group allows 0.0.0.0/0 on port 22 (SSH)</div>\n              <div style="font-size: 12px; margin-bottom: 4px; padding: 8px; background: #f8f9fa; border-radius: 4px;">• S3 bucket with public read access</div>\n              <div style="font-size: 12px; margin-bottom: 4px; padding: 8px; background: #f8f9fa; border-radius: 4px;">• Unencrypted EBS volumes detected</div>\n            </div>\n            <button id="security-close-btn" style="\n              background: #667eea;\n              color: white;\n              border: none;\n              padding: 10px 20px;\n              border-radius: 4px;\n              cursor: pointer;\n              width: 100%;\n            ">Close</button>\n          </div>\n        </div>\n      ',document.body.appendChild(e),document.getElementById("security-close-btn").addEventListener("click",function(){e.remove()})},2e3)}},{key:"showProviderDetails",value:(u=d(i().m(function e(n){var t,o,a,r,c,s=this;return i().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,this.getProviderDetailsData(n);case 1:t=e.v,o=t.resources||[],(a=document.createElement("div")).style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(0,0,0,0.6);\n      backdrop-filter: blur(8px);\n      z-index: 10000;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      animation: fadeIn 0.3s ease-out;\n    ",a.innerHTML='\n      <div style="\n        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);\n        width: 650px;\n        max-height: 80vh;\n        border-radius: 20px;\n        padding: 28px;\n        display: flex;\n        flex-direction: column;\n        box-shadow: \n          0 20px 60px rgba(0, 0, 0, 0.15),\n          0 8px 32px rgba(0, 0, 0, 0.1),\n          inset 0 1px 0 rgba(255, 255, 255, 0.9);\n        border: 1px solid rgba(255, 255, 255, 0.3);\n        animation: slideUp 0.4s cubic-bezier(0.23, 1, 0.320, 1);\n      ">\n        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; padding-bottom: 16px; border-bottom: 0.5px solid rgba(0, 0, 0, 0.08);">\n          <h3 style="\n            margin: 0;\n            font-size: 24px;\n            font-weight: 700;\n            color: #1d1d1f;\n            background: linear-gradient(135deg, #1d1d1f 0%, #424245 100%);\n            -webkit-background-clip: text;\n            -webkit-text-fill-color: transparent;\n            background-clip: text;\n          ">'.concat(this.getProviderIcon(n,!0)," ").concat(n.toUpperCase(),' Instances</h3>\n          <button id="close-modal-btn" style="\n            background: rgba(0, 0, 0, 0.06);\n            border: none;\n            border-radius: 50%;\n            width: 32px;\n            height: 32px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-size: 16px;\n            cursor: pointer;\n            color: #86868b;\n            transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n            backdrop-filter: blur(10px);\n          ">×</button>\n        </div>\n        \n        <input \n          type="text" \n          id="search-input"\n          placeholder="🔍 Search instances by name, status, or IP..."\n          style="\n            width: 100%;\n            padding: 16px 20px;\n            margin-bottom: 16px;\n            border: 0.5px solid rgba(0, 0, 0, 0.15);\n            border-radius: 12px;\n            box-sizing: border-box;\n            font-size: 14px;\n            font-weight: 400;\n            background: rgba(255, 255, 255, 0.9);\n            backdrop-filter: blur(20px);\n            transition: all 0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n            box-shadow: \n              0 2px 8px rgba(0, 0, 0, 0.04),\n              inset 0 1px 0 rgba(255, 255, 255, 0.9);\n          "\n        >\n        \n        <div style="\n          flex: 1;\n          overflow-y: auto;\n          border-radius: 12px;\n          padding: 4px;\n          scrollbar-width: thin;\n          scrollbar-color: rgba(0, 122, 255, 0.3) transparent;\n        ">\n          ').concat(o.map(function(e){var t="running"===e.status||"active"===e.status?"#28a745":"stopped"===e.status||"deallocated"===e.status?"#dc3545":"#ffc107",o=("running"===e.status||"active"===e.status)&&e.publicIp;return'\n              <div class="simple-card" style="\n                background: rgba(255, 255, 255, 0.95);\n                backdrop-filter: blur(20px) saturate(180%);\n                border: 0.5px solid rgba(255, 255, 255, 0.3);\n                padding: 20px;\n                margin-bottom: 12px;\n                border-radius: 16px;\n                display: block;\n                width: 100%;\n                box-sizing: border-box;\n                cursor: pointer;\n                transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n                box-shadow: \n                  0 4px 16px rgba(0, 0, 0, 0.06),\n                  0 1px 4px rgba(0, 0, 0, 0.04),\n                  inset 0 1px 0 rgba(255, 255, 255, 0.7);\n                position: relative;\n                overflow: hidden;\n              ">\n                <div style="\n                  display: flex; \n                  justify-content: space-between; \n                  align-items: flex-start; \n                  margin-bottom: 12px;\n                ">\n                  <div style="flex: 1;">\n                    <div style="\n                      font-weight: 600; \n                      font-size: 16px; \n                      margin-bottom: 4px; \n                      color: #1d1d1f;\n                      line-height: 1.4;\n                    ">'.concat(e.name,"</div>\n                    <div style=\"\n                      font-size: 12px; \n                      color: #86868b; \n                      font-family: 'SF Mono', Monaco, monospace;\n                      background: rgba(0, 0, 0, 0.04);\n                      padding: 2px 6px;\n                      border-radius: 4px;\n                      display: inline-block;\n                    \">").concat(e.id.replace("".concat(n,":"),""),'</div>\n                  </div>\n                  <div style="text-align: right;">\n                    <span style="\n                      background: ').concat(t,";\n                      color: white;\n                      padding: 4px 10px;\n                      border-radius: 12px;\n                      font-size: 11px;\n                      font-weight: 600;\n                      text-transform: uppercase;\n                      letter-spacing: 0.5px;\n                      box-shadow: 0 2px 8px ").concat(t,'33;\n                    ">').concat(e.status,'</span>\n                  </div>\n                </div>\n                \n                <div style="\n                  display: flex; \n                  justify-content: space-between; \n                  align-items: center; \n                  margin-bottom: 16px;\n                  padding: 12px 0;\n                  border-top: 0.5px solid rgba(0, 0, 0, 0.06);\n                  border-bottom: 0.5px solid rgba(0, 0, 0, 0.06);\n                ">\n                  <div style="font-size: 13px; color: #86868b;">\n                    ').concat(e.publicIp?"🌐 ".concat(e.publicIp):"🔒 No public IP","\n                    ").concat(e.region?" • 📍 ".concat(e.region):"",'\n                  </div>\n                </div>\n                \n                <div style="display: flex; gap: 8px; flex-wrap: wrap;">\n                  ').concat(o?'<button class="ssh-btn" data-instance-id="'.concat(e.id,'" data-instance-name="').concat(e.name,'" data-public-ip="').concat(e.publicIp,'" data-region="').concat(e.region||"",'" style="\n                    background: linear-gradient(135deg, #007aff 0%, #005ce6 100%);\n                    color: white;\n                    border: none;\n                    padding: 8px 16px;\n                    border-radius: 8px;\n                    cursor: pointer;\n                    font-size: 12px;\n                    font-weight: 600;\n                    transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n                    box-shadow: 0 2px 8px rgba(0, 122, 255, 0.25);\n                    backdrop-filter: blur(20px);\n                  ">⚡ SSH</button>'):"",'\n                  <button class="console-btn" data-instance-id="').concat(e.id,'" data-region="').concat(e.region||"",'" style="\n                    background: rgba(0, 0, 0, 0.04);\n                    color: #1d1d1f;\n                    border: 0.5px solid rgba(0, 0, 0, 0.1);\n                    padding: 8px 16px;\n                    border-radius: 8px;\n                    cursor: pointer;\n                    font-size: 12px;\n                    font-weight: 600;\n                    transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n                    box-shadow: \n                      0 2px 8px rgba(0, 0, 0, 0.04),\n                      inset 0 1px 0 rgba(255, 255, 255, 0.7);\n                    backdrop-filter: blur(20px);\n                  ">🖥️ Console</button>\n                  ').concat("digitalocean"===n?'<button class="delete-btn" data-instance-id="'.concat(e.id,'" data-instance-name="').concat(e.name,'" style="\n                    background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);\n                    color: white;\n                    border: none;\n                    padding: 8px 16px;\n                    border-radius: 8px;\n                    cursor: pointer;\n                    font-size: 12px;\n                    font-weight: 600;\n                    transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n                    box-shadow: 0 2px 8px rgba(220, 53, 69, 0.25);\n                    backdrop-filter: blur(20px);\n                  ">🗑️ Delete</button>'):"","\n                </div>\n              </div>\n            ")}).join(""),"\n        </div>\n      </div>\n    "),(r=document.createElement("style")).textContent="\n      @keyframes fadeIn {\n        from { opacity: 0; }\n        to { opacity: 1; }\n      }\n      @keyframes slideUp {\n        from { \n          opacity: 0;\n          transform: scale(0.9) translateY(40px);\n        }\n        to { \n          opacity: 1;\n          transform: scale(1) translateY(0);\n        }\n      }\n      .simple-card:hover {\n        transform: translateY(-2px) scale(1.01) !important;\n        border-color: rgba(0, 122, 255, 0.3) !important;\n        box-shadow: \n          0 12px 32px rgba(0, 122, 255, 0.1),\n          0 4px 16px rgba(0, 0, 0, 0.08),\n          inset 0 1px 0 rgba(255, 255, 255, 0.9) !important;\n      }\n      #close-modal-btn:hover {\n        background: rgba(0, 0, 0, 0.12) !important;\n        color: #1d1d1f !important;\n        transform: scale(1.1) !important;\n      }\n      #search-input:focus {\n        outline: none !important;\n        border-color: #007aff !important;\n        box-shadow: \n          0 0 0 4px rgba(0, 122, 255, 0.15),\n          0 4px 16px rgba(0, 122, 255, 0.1),\n          inset 0 1px 0 rgba(255, 255, 255, 1) !important;\n        transform: scale(1.01) translateY(-1px) !important;\n        background: rgba(255, 255, 255, 1) !important;\n      }\n      .ssh-btn:hover {\n        background: linear-gradient(135deg, #0056cc 0%, #004bb8 100%) !important;\n        transform: translateY(-1px) scale(1.02) !important;\n        box-shadow: 0 4px 16px rgba(0, 122, 255, 0.35) !important;\n      }\n      .console-btn:hover {\n        background: rgba(0, 122, 255, 0.08) !important;\n        border-color: rgba(0, 122, 255, 0.2) !important;\n        color: #007aff !important;\n        transform: translateY(-1px) scale(1.02) !important;\n        box-shadow: 0 4px 12px rgba(0, 122, 255, 0.15) !important;\n      }\n      .delete-btn:hover {\n        background: linear-gradient(135deg, #c82333 0%, #a71e2a 100%) !important;\n        transform: translateY(-1px) scale(1.02) !important;\n        box-shadow: 0 4px 16px rgba(220, 53, 69, 0.35) !important;\n      }\n      .ssh-btn:active, .console-btn:active, .delete-btn:active {\n        transform: scale(0.98) !important;\n        transition: transform 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94) !important;\n      }\n    ",document.head.appendChild(r),document.body.appendChild(a),a.querySelector("#close-modal-btn").addEventListener("click",function(){a.style.opacity="0",a.style.transform="scale(0.95)",setTimeout(function(){return a.remove()},200)}),(c=a.querySelector("#search-input")).addEventListener("input",function(e){var n=e.target.value.toLowerCase();a.querySelectorAll(".simple-card").forEach(function(e){var t=e.textContent.toLowerCase();e.style.display=t.includes(n)?"block":"none"})}),setTimeout(function(){return c.focus()},100),a.querySelectorAll(".ssh-btn").forEach(function(e){e.addEventListener("click",function(){var t=e.dataset.instanceId,o=e.dataset.instanceName,a=e.dataset.publicIp,r=e.dataset.region;s.handleInstanceSSH(n,t,o,a,r)})}),a.querySelectorAll(".console-btn").forEach(function(e){e.addEventListener("click",function(){var t=e.dataset.instanceId,o=e.dataset.region;s.openInstanceConsole(n,t.replace("".concat(n,":"),""),o)})}),a.querySelectorAll(".delete-btn").forEach(function(e){e.addEventListener("click",function(){var t=e.dataset.instanceId,o=e.dataset.instanceName;s.handleInstanceDelete(n,t,o)})}),a.addEventListener("click",function(e){e.target===a&&(a.style.opacity="0",a.style.transform="scale(0.95)",setTimeout(function(){return a.remove()},200))});case 2:return e.a(2)}},e,this)})),function(e){return u.apply(this,arguments)})},{key:"createInstanceCard",value:function(e,n){var t="running"===e.status||"active"===e.status?"#28a745":"stopped"===e.status||"deallocated"===e.status?"#dc3545":"#ffc107",o=("running"===e.status||"active"===e.status)&&e.publicIp;return'\n      <div class="instance-card" \n           data-instance-id="'.concat(e.id,'" \n           data-instance-name="').concat(e.name,'"\n           data-public-ip="').concat(e.publicIp||"",'"\n           data-status="').concat(e.status,'"\n           data-region="').concat(e.region||"",'"\n           style="\n             display: block;\n             width: 100%;\n             border: 1px solid #e1e5e9;\n             border-radius: 8px;\n             padding: 16px;\n             margin-bottom: 12px;\n             cursor: ').concat(o?"pointer":"default",";\n             transition: all 0.2s;\n             background: ").concat(o?"white":"#f8f9fa",";\n             box-sizing: border-box;\n             ").concat(o?"box-shadow: 0 2px 4px rgba(0,0,0,0.1);":"",'\n           "\n           data-can-ssh="').concat(o,'">\n        \n        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px;">\n          <div style="flex: 1;">\n            <div style="font-weight: 600; font-size: 16px; margin-bottom: 4px; color: #333;">\n              ').concat(e.name,'\n            </div>\n            <div style="font-size: 12px; color: #666; font-family: monospace;">\n              ').concat(e.id.replace("".concat(n,":"),""),'\n            </div>\n          </div>\n          <div style="text-align: right;">\n            <span style="\n              background: ').concat(t,';\n              color: white;\n              padding: 2px 8px;\n              border-radius: 12px;\n              font-size: 11px;\n              font-weight: 500;\n            ">').concat(e.status,'</span>\n          </div>\n        </div>\n        \n        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">\n          <div style="font-size: 13px; color: #86868b;">\n            ').concat(e.publicIp?"🌐 ".concat(e.publicIp):"🔒 No public IP","\n            ").concat(e.region?" • ".concat(e.region):"",'\n          </div>\n        </div>\n        \n        <div class="instance-actions" style="display: flex; gap: 8px; margin-top: 12px; padding-top: 12px; border-top: 0.5px solid rgba(0, 0, 0, 0.08);">\n          ').concat(o?'\n            <button class="instance-action-btn ssh-btn" data-action="ssh" style="\n              flex: 1;\n              background: linear-gradient(135deg, #007aff 0%, #005ce6 100%);\n              color: white;\n              border: none;\n              border-radius: 8px;\n              padding: 8px 12px;\n              font-size: 11px;\n              font-weight: 600;\n              cursor: pointer;\n              transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n              box-shadow: 0 2px 8px rgba(0, 122, 255, 0.2);\n            ">\n              ⚡ SSH\n            </button>\n          ':"",'\n          <button class="instance-action-btn console-btn" data-action="console" style="\n            flex: 1;\n            background: rgba(0, 0, 0, 0.04);\n            color: #1d1d1f;\n            border: 0.5px solid rgba(0, 0, 0, 0.1);\n            border-radius: 8px;\n            padding: 8px 12px;\n            font-size: 11px;\n            font-weight: 600;\n            cursor: pointer;\n            transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n          ">\n            🖥️ Console\n          </button>\n          ').concat("digitalocean"===n?'\n            <button class="instance-action-btn delete-btn" data-action="delete" style="\n              background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);\n              color: white;\n              border: none;\n              border-radius: 8px;\n              padding: 8px 12px;\n              font-size: 11px;\n              font-weight: 600;\n              cursor: pointer;\n              transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n              box-shadow: 0 2px 8px rgba(220, 53, 69, 0.2);\n            ">\n              🗑️ Delete\n            </button>\n          ':"","\n        </div>\n        </div>\n        \n        ").concat(e.createdAt?'\n          <div style="font-size: 11px; color: #999; margin-top: 8px; border-top: 1px solid #f1f3f4; padding-top: 8px;">\n            Created: '.concat(new Date(e.createdAt).toLocaleDateString(),"\n          </div>\n        "):"","\n      </div>\n    ")}},{key:"handleInstanceSSH",value:(s=d(i().m(function e(n,t,o,a){var r,c,s,d,l,u,p=arguments;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r=p.length>4&&void 0!==p[4]?p[4]:"",(c=document.getElementById("provider-modal"))&&c.remove(),this.showNotification("Connecting to ".concat(o,"..."),"info"),e.p=1,s="ubuntu","aws"!==n){e.n=3;break}return e.n=2,chrome.storage.local.get(["settings"]);case 2:l=e.v,s=(null===(d=l.settings)||void 0===d?void 0:d.awsOsUser)||"ubuntu";case 3:return e.n=4,chrome.runtime.sendMessage({action:"simulateSSHClick",provider:n,instanceId:t.replace("".concat(n,":"),""),instanceName:o,publicIp:a,region:r,osUser:s});case 4:e.v.success?this.showNotification("SSH connection initiated for ".concat(o),"success"):this.openCloudProviderConsole(n,t.replace("".concat(n,":"),"")),e.n=6;break;case 5:e.p=5,u=e.v,console.error("Error initiating SSH:",u),this.openCloudProviderConsole(n,t.replace("".concat(n,":"),""));case 6:return e.a(2)}},e,this,[[1,5]])})),function(e,n,t,o){return s.apply(this,arguments)})},{key:"handleInstanceDelete",value:(c=d(i().m(function e(n,t,o){var a,r,c;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:if(confirm('Are you sure you want to delete "'.concat(o,'"?\n\n')+"This action cannot be undone. The droplet and all its data will be permanently destroyed.")){e.n=1;break}return e.a(2);case 1:return(a=document.getElementById("provider-modal"))&&a.remove(),this.showNotification("Deleting ".concat(o,"..."),"info"),e.p=2,e.n=3,chrome.runtime.sendMessage({action:"performResourceAction",resourceAction:"delete",resourceId:t});case 3:(r=e.v).success?(this.showNotification("".concat(o," deleted successfully"),"success"),this.refreshDashboard()):this.showNotification("Failed to delete ".concat(o,": ").concat(r.error||"Unknown error"),"error"),e.n=5;break;case 4:e.p=4,c=e.v,console.error("Error deleting instance:",c),this.showNotification("Error deleting ".concat(o,": ").concat(c.message),"error");case 5:return e.a(2)}},e,this,[[2,4]])})),function(e,n,t){return c.apply(this,arguments)})},{key:"openInstanceConsole",value:function(e,n){var t,o=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"us-east-1";switch(e){case"aws":var r=a||"us-east-1";t="https://".concat(r,".console.aws.amazon.com/ec2/home?region=").concat(r,"#InstanceDetails:instanceId=").concat(n);break;case"digitalocean":t="https://cloud.digitalocean.com/droplets/".concat(n);break;case"gcp":t="https://console.cloud.google.com/compute/instancesDetail/zones/us-central1-a/instances/".concat(n);break;case"azure":t="https://portal.azure.com/#@/resource/subscriptions/[subscription]/resourceGroups/[resourceGroup]/providers/Microsoft.Compute/virtualMachines/".concat(n,"/overview");break;default:return void this.showNotification("Console access not supported for this provider yet","warning")}var i=document.getElementById("provider-modal");i&&(i.classList.remove("show"),i.querySelector(".modal-content").classList.remove("show"),setTimeout(function(){return i.remove()},400)),chrome.tabs.create({url:t},function(){o.showNotification("Opened ".concat(e.toUpperCase()," console for this instance"),"info")})}},{key:"openCloudProviderConsole",value:function(e,n){this.openInstanceConsole(e,n)}},{key:"exportData",value:function(){var e=this;chrome.runtime.sendMessage({action:"refreshAllProviders"},function(n){if(n.success){var t={timestamp:(new Date).toISOString(),providers:n.data,settings:{}};chrome.storage.local.get(["settings"],function(n){t.settings=n.settings||{};var o=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),a=URL.createObjectURL(o),r=document.createElement("a");r.href=a,r.download="cloudhub-export-".concat((new Date).toISOString().split("T")[0],".json"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a),e.showNotification("Data exported successfully!","success")})}else e.showNotification("Failed to export data","error")})}},{key:"launchInstance",value:(r=d(i().m(function e(n,t,o){var a,r,c=this;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,chrome.runtime.sendMessage({action:"launchInstance",provider:n,instanceName:t,instanceSize:o});case 1:(a=e.v).success?(this.showNotification("".concat(t," launched successfully on ").concat(n.toUpperCase(),"!"),"success"),setTimeout(function(){return c.refreshDashboard()},3e3)):this.showNotification("Failed to launch instance: ".concat(a.error),"error"),e.n=3;break;case 2:e.p=2,r=e.v,console.error("Error launching instance:",r),this.showNotification("Error launching instance","error");case 3:return e.a(2)}},e,this,[[0,2]])})),function(e,n,t){return r.apply(this,arguments)})},{key:"getProviderDetailsData",value:(o=d(i().m(function e(n){var t,o;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,chrome.runtime.sendMessage({action:"getProviderDetails",provider:n});case 1:if(!(t=e.v).success){e.n=2;break}return e.a(2,{icon:this.getProviderIcon(n),totalCost:t.data.estimatedCost||"0.00",resources:t.data.resources||[],costBreakdown:t.data.costBreakdown||[]});case 2:e.n=4;break;case 3:e.p=3,o=e.v,console.error("Error getting provider details:",o);case 4:return e.a(2,{icon:this.getProviderIcon(n),totalCost:"0.00",resources:[],costBreakdown:[]})}},e,this,[[0,3]])})),function(e){return o.apply(this,arguments)})},{key:"getProviderIcon",value:function(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?'<img src="'.concat({aws:"icons/aws-icon.png",gcp:"icons/gcp-icon.png",azure:"icons/azure-icon.png",digitalocean:"icons/digitalocean-icon.png"}[e]||"icons/aws-icon.png",'" alt="').concat(e,'" class="provider-icon-img" style="width: 24px; height: 24px; margin-right: 8px; vertical-align: middle;" />'):{aws:"☁️",gcp:"🔵",azure:"🔷",digitalocean:"💧"}[e]||"☁️"}},{key:"calculateEnhancedCost",value:function(e,n){if(!n||0===n.length)return"0.00";var t={aws:{"t2.nano":.0058,"t2.micro":.0116,"t2.small":.023,"t2.medium":.0464,"t3.micro":.0104,"t3.small":.0208,"m5.large":.096,default:.0116},digitalocean:{"s-1vcpu-1gb":5,"s-1vcpu-2gb":10,"s-2vcpu-2gb":15,"s-2vcpu-4gb":20,"s-4vcpu-8gb":40,default:10},gcp:{"f1-micro":.0076,"g1-small":.027,"n1-standard-1":.0475,"n1-standard-2":.095,default:.027},azure:{Standard_B1s:.0052,Standard_B1ms:.0104,Standard_B2s:.0208,Standard_D2s_v3:.096,default:.0104}},o=0;return n.forEach(function(n){var a=n.instanceType||n.size||"default";if("running"===n.status||"active"===n.status)if("digitalocean"===e){var r=t[e][a]||t[e].default;o+=r}else{var i=t[e][a]||t[e].default;o+=720*i}}),o.toFixed(2)}},{key:"clearAllData",value:function(){var e=this;confirm("Are you sure you want to clear all data? This will remove all credentials and settings.")&&chrome.storage.local.clear(function(){e.showNotification("All data cleared successfully","success"),setTimeout(function(){return window.location.reload()},1e3)})}}],t&&l(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t,o,r,c,s,u,p,g,f,b,m,v,h}();console.log("[CloudHub] Setting up DOMContentLoaded listener..."),document.addEventListener("DOMContentLoaded",function(){console.log("[CloudHub] DOMContentLoaded fired, creating CloudHubPopup..."),new p}),console.log("[CloudHub] popup.js finished loading")})();