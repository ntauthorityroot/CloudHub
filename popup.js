/*! For license information please see popup.js.LICENSE.txt */
(()=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},n(e)}function e(n,e){return function(n){if(Array.isArray(n))return n}(n)||function(n,e){var t=null==n?null:"undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=t){var o,a,r,i,s=[],c=!0,d=!1;try{if(r=(t=t.call(n)).next,0===e){if(Object(t)!==t)return;c=!1}else for(;!(c=(o=r.call(t)).done)&&(s.push(o.value),s.length!==e);c=!0);}catch(n){d=!0,a=n}finally{try{if(!c&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(d)throw a}}return s}}(n,e)||function(n,e){if(n){if("string"==typeof n)return t(n,e);var o={}.toString.call(n).slice(8,-1);return"Object"===o&&n.constructor&&(o=n.constructor.name),"Map"===o||"Set"===o?Array.from(n):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?t(n,e):void 0}}(n,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,o=Array(e);t<e;t++)o[t]=n[t];return o}function o(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(n);e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})),t.push.apply(t,o)}return t}function a(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?o(Object(t),!0).forEach(function(e){r(n,e,t[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach(function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))})}return n}function r(n,e,t){return(e=u(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function i(){var n,e,t="function"==typeof Symbol?Symbol:{},o=t.iterator||"@@iterator",a=t.toStringTag||"@@toStringTag";function r(t,o,a,r){var i=o&&o.prototype instanceof d?o:d,l=Object.create(i.prototype);return s(l,"_invoke",function(t,o,a){var r,i,s,d=0,l=a||[],u=!1,p={p:0,n:0,v:n,a:g,f:g.bind(n,4),d:function(e,t){return r=e,i=0,s=n,p.n=t,c}};function g(t,o){for(i=t,s=o,e=0;!u&&d&&!a&&e<l.length;e++){var a,r=l[e],g=p.p,f=r[2];t>3?(a=f===o)&&(s=r[(i=r[4])?5:(i=3,3)],r[4]=r[5]=n):r[0]<=g&&((a=t<2&&g<r[1])?(i=0,p.v=o,p.n=r[1]):g<f&&(a=t<3||r[0]>o||o>f)&&(r[4]=t,r[5]=o,p.n=f,i=0))}if(a||t>1)return c;throw u=!0,o}return function(a,l,f){if(d>1)throw TypeError("Generator is already running");for(u&&1===l&&g(l,f),i=l,s=f;(e=i<2?n:s)||!u;){r||(i?i<3?(i>1&&(p.n=-1),g(i,s)):p.n=s:p.v=s);try{if(d=2,r){if(i||(a="next"),e=r[a]){if(!(e=e.call(r,s)))throw TypeError("iterator result is not an object");if(!e.done)return e;s=e.value,i<2&&(i=0)}else 1===i&&(e=r.return)&&e.call(r),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);r=n}else if((e=(u=p.n<0)?s:t.call(o,p))!==c)break}catch(e){r=n,i=1,s=e}finally{d=1}}return{value:e,done:u}}}(t,a,r),!0),l}var c={};function d(){}function l(){}function u(){}e=Object.getPrototypeOf;var p=[][o]?e(e([][o]())):(s(e={},o,function(){return this}),e),g=u.prototype=d.prototype=Object.create(p);function f(n){return Object.setPrototypeOf?Object.setPrototypeOf(n,u):(n.__proto__=u,s(n,a,"GeneratorFunction")),n.prototype=Object.create(g),n}return l.prototype=u,s(g,"constructor",u),s(u,"constructor",l),l.displayName="GeneratorFunction",s(u,a,"GeneratorFunction"),s(g),s(g,a,"Generator"),s(g,o,function(){return this}),s(g,"toString",function(){return"[object Generator]"}),(i=function(){return{w:r,m:f}})()}function s(n,e,t,o){var a=Object.defineProperty;try{a({},"",{})}catch(n){a=0}s=function(n,e,t,o){function r(e,t){s(n,e,function(n){return this._invoke(e,t,n)})}e?a?a(n,e,{value:t,enumerable:!o,configurable:!o,writable:!o}):n[e]=t:(r("next",0),r("throw",1),r("return",2))},s(n,e,t,o)}function c(n,e,t,o,a,r,i){try{var s=n[r](i),c=s.value}catch(n){return void t(n)}s.done?e(c):Promise.resolve(c).then(o,a)}function d(n){return function(){var e=this,t=arguments;return new Promise(function(o,a){var r=n.apply(e,t);function i(n){c(r,o,a,i,s,"next",n)}function s(n){c(r,o,a,i,s,"throw",n)}i(void 0)})}}function l(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,u(o.key),o)}}function u(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}console.log("[CloudHub] popup.js is loading...");var p=function(){return n=function n(){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),console.log("[CloudHub] CloudHubPopup constructor called"),this.currentTab="dashboard",this.providers=["aws","gcp","azure","digitalocean"],this.providerCache={},this.lastFetchTime=null,this.init()},t=[{key:"init",value:function(){this.initializeProviderStates(),this.setupEventListeners(),this.loadSettings(),this.loadCredentials(),this.refreshDashboard()}},{key:"initializeProviderStates",value:function(){var n=this;this.providers.forEach(function(e){n.setProviderConfiguredState(e,!1)})}},{key:"setupEventListeners",value:function(){var n=this;console.log("[CloudHub] Setting up event listeners..."),document.querySelectorAll(".tab").forEach(function(e){e.addEventListener("click",function(e){n.switchTab(e.target.dataset.tab)})}),document.getElementById("refresh-btn").addEventListener("click",function(){n.refreshDashboard()}),document.querySelectorAll(".provider").forEach(function(e){e.addEventListener("click",function(e){var t=e.currentTarget.dataset.provider;n.showProviderDetails(t)})}),document.getElementById("launch-instance").addEventListener("click",function(){n.showLaunchDialog()}),document.getElementById("cost-alert").addEventListener("click",function(){n.showCostAlerts()}),document.getElementById("security-scan").addEventListener("click",function(){n.runSecurityScan()}),console.log("[CloudHub] Setting up save button listeners..."),document.getElementById("save-aws").addEventListener("click",function(){console.log("[CloudHub] AWS save button clicked!"),n.saveCredentials("aws")}),document.getElementById("save-gcp").addEventListener("click",function(){n.saveCredentials("gcp")}),document.getElementById("save-azure").addEventListener("click",function(){n.saveCredentials("azure")}),document.getElementById("save-do").addEventListener("click",function(){n.saveCredentials("digitalocean")}),document.getElementById("aws-edit").addEventListener("click",function(){n.setCredentialSavedState("aws",!1)}),document.getElementById("gcp-edit").addEventListener("click",function(){n.setCredentialSavedState("gcp",!1)}),document.getElementById("azure-edit").addEventListener("click",function(){n.setCredentialSavedState("azure",!1)}),document.getElementById("do-edit").addEventListener("click",function(){n.setCredentialSavedState("digitalocean",!1)}),document.getElementById("do-reauth").addEventListener("click",function(){n.reauthenticateDigitalOcean()}),document.getElementById("auto-refresh").addEventListener("change",function(e){n.updateSetting("autoRefresh",e.target.checked)}),document.getElementById("cost-notifications").addEventListener("change",function(e){n.updateSetting("costNotifications",e.target.checked)}),document.getElementById("security-notifications").addEventListener("change",function(e){n.updateSetting("securityNotifications",e.target.checked)}),document.getElementById("ssh-method").addEventListener("change",function(e){n.updateSetting("sshMethod",e.target.value)}),document.getElementById("aws-os-user").addEventListener("input",function(e){n.updateSetting("awsOsUser",e.target.value||"ubuntu")}),document.getElementById("export-data").addEventListener("click",function(){n.exportData()}),document.getElementById("clear-data").addEventListener("click",function(){n.clearAllData()})}},{key:"switchTab",value:function(n){document.querySelectorAll(".tab").forEach(function(n){return n.classList.remove("active")}),document.querySelectorAll(".tab-content").forEach(function(n){return n.classList.remove("active")}),document.querySelector('[data-tab="'.concat(n,'"]')).classList.add("active"),document.getElementById("".concat(n,"-tab")).classList.add("active"),this.currentTab=n}},{key:"refreshDashboard",value:(y=d(i().m(function n(){var e,t,o;return i().w(function(n){for(;;)switch(n.p=n.n){case 0:return(e=document.getElementById("refresh-btn")).textContent="‚ü≥",e.disabled=!0,n.p=1,n.n=2,chrome.runtime.sendMessage({action:"refreshAllProviders"});case 2:(t=n.v).success?(this.providerCache=t.data,this.lastFetchTime=Date.now(),console.log("[CloudHub] Cached provider data for",Object.keys(this.providerCache).length,"providers"),this.updateDashboard(t.data),this.updateLastSync()):console.error("Failed to refresh dashboard:",t.error),n.n=4;break;case 3:n.p=3,o=n.v,console.error("Error refreshing dashboard:",o);case 4:return n.p=4,e.innerHTML='<img src="icons/refresh-icon.png" alt="Refresh" style="width: 16px; height: 16px;">',e.disabled=!1,n.f(4);case 5:return n.a(2)}},n,this,[[1,3,4,5]])})),function(){return y.apply(this,arguments)})},{key:"updateDashboard",value:function(n){var e=this;this.providers.forEach(function(t){var o=n[t];o&&e.updateProviderStats(t,o)})}},{key:"updateProviderStats",value:function(n,e){var t=e.resources?this.calculateEnhancedCost(n,e.resources):"0.00";switch(n){case"aws":document.getElementById("aws-ec2-count").textContent=e.ec2Count||"-",document.getElementById("aws-cost").textContent="0.00"!==t?t:e.estimatedCost||"-";break;case"gcp":document.getElementById("gcp-compute-count").textContent=e.computeCount||"-",document.getElementById("gcp-cost").textContent="0.00"!==t?t:e.estimatedCost||"-";break;case"azure":document.getElementById("azure-vm-count").textContent=e.vmCount||"-",document.getElementById("azure-cost").textContent="0.00"!==t?t:e.estimatedCost||"-";break;case"digitalocean":document.getElementById("do-droplet-count").textContent=e.dropletCount||"-",document.getElementById("do-cost").textContent=e.realCost||e.estimatedCost||("0.00"!==t?t:"-")}}},{key:"saveCredentials",value:(x=d(i().m(function n(e){var t,o,r,s;return i().w(function(n){for(;;)switch(n.p=n.n){case 0:if(console.log("[CloudHub] Starting credential save for ".concat(e)),t=this.getCredentialInputs(e),console.log("[CloudHub] Credentials collected for ".concat(e,":"),a(a({},t),{},{accessKeyId:t.accessKeyId?"".concat(t.accessKeyId.slice(0,8),"..."):void 0,secretAccessKey:t.secretAccessKey?"***":void 0,token:t.token?"***":void 0})),this.setCredentialLoadingState(e,!0),console.log("[CloudHub] Set loading state for ".concat(e)),n.p=1,console.log("[CloudHub] Sending saveCredentials message for ".concat(e)),chrome.runtime){n.n=2;break}throw new Error("chrome.runtime is not available");case 2:return console.log("[CloudHub] chrome.runtime is available, sending message..."),n.n=3,chrome.runtime.sendMessage({action:"saveCredentials",provider:e,credentials:t});case 3:if(o=n.v,console.log("[CloudHub] Save response for ".concat(e,":"),o),o){n.n=4;break}throw new Error("No response received from background script");case 4:if(!o.success){n.n=6;break}return console.log("[CloudHub] Credentials saved successfully for ".concat(e,", testing connection...")),n.n=5,this.testConnection(e);case 5:r=n.v,console.log("[CloudHub] Connection test result for ".concat(e,":"),r),r&&r.success?(console.log("[CloudHub] Connection test passed for ".concat(e,", showing saved state")),this.setCredentialSavedState(e,!0),this.setProviderConfiguredState(e,!0),this.showNotification("".concat(e.toUpperCase()," credentials saved and verified"),"success")):(console.log("[CloudHub] Connection test failed for ".concat(e,", but credentials are saved")),this.setCredentialLoadingState(e,!1),this.setCredentialSavedState(e,!0),this.setProviderConfiguredState(e,!1),this.showNotification("".concat(e.toUpperCase()," credentials saved (connection test failed - check credentials)"),"warning")),n.n=7;break;case 6:console.error("[CloudHub] Failed to save credentials for ".concat(e,":"),o.error),this.setCredentialLoadingState(e,!1),this.showNotification("Failed to save ".concat(e," credentials: ").concat(o.error),"error");case 7:n.n=9;break;case 8:n.p=8,s=n.v,console.error("[CloudHub] Error saving credentials for ".concat(e,":"),s),console.error("[CloudHub] Error stack:",s.stack),this.setCredentialLoadingState(e,!1),this.showNotification("Error saving credentials","error");case 9:console.log("[CloudHub] saveCredentials function completed for ".concat(e));case 10:return n.a(2)}},n,this,[[1,8]])})),function(n){return x.apply(this,arguments)})},{key:"setCredentialLoadingState",value:function(n,e){var t=document.getElementById("save-".concat("digitalocean"===n?"do":n)),o=t.querySelector(".btn-text"),a=t.querySelector(".btn-loading");e?(t.disabled=!0,o.style.display="none",a.style.display="inline"):(t.disabled=!1,o.style.display="inline",a.style.display="none")}},{key:"setCredentialSavedState",value:function(n,e){var t="digitalocean"===n?"do":n,o=document.getElementById("".concat(t,"-inputs")),a=document.getElementById("".concat(t,"-saved"));e?(o.style.display="none",a.style.display="block",this.clearCredentialInputs(n)):(o.style.display="block",a.style.display="none",this.setProviderConfiguredState(n,!1))}},{key:"clearCredentialInputs",value:function(n){switch(n){case"aws":document.getElementById("aws-access-key").value="",document.getElementById("aws-secret-key").value="";break;case"gcp":document.getElementById("gcp-service-account").value="";break;case"azure":document.getElementById("azure-client-secret").value="";break;case"digitalocean":document.getElementById("do-token").value=""}}},{key:"setProviderConfiguredState",value:function(n,e){var t=document.querySelector('.provider[data-provider="'.concat(n,'"]'));t&&(t.classList.remove("provider-configured","provider-unconfigured"),e?t.classList.add("provider-configured"):t.classList.add("provider-unconfigured"))}},{key:"getCredentialInputs",value:function(n){switch(n){case"aws":return{accessKeyId:document.getElementById("aws-access-key").value,secretAccessKey:document.getElementById("aws-secret-key").value,region:document.getElementById("aws-region").value||""};case"gcp":return{serviceAccount:document.getElementById("gcp-service-account").value,projectId:document.getElementById("gcp-project").value};case"azure":return{clientId:document.getElementById("azure-client-id").value,clientSecret:document.getElementById("azure-client-secret").value,tenantId:document.getElementById("azure-tenant-id").value,subscriptionId:document.getElementById("azure-subscription-id").value};case"digitalocean":return{token:document.getElementById("do-token").value};default:return{}}}},{key:"testConnection",value:(v=d(i().m(function n(e){var t,o;return i().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,chrome.runtime.sendMessage({action:"testConnection",provider:e});case 1:return t=n.v,n.a(2,t);case 2:return n.p=2,o=n.v,console.error("Error testing connection:",o),n.a(2,{success:!1,error:o.message})}},n,null,[[0,2]])})),function(n){return v.apply(this,arguments)})},{key:"loadCredentials",value:(h=d(i().m(function n(){var e,t,o,a;return i().w(function(n){for(;;)switch(n.p=n.n){case 0:return console.log("[CloudHub] Loading saved credentials..."),n.p=1,n.n=2,chrome.storage.local.get(["credentials","credentialMetadata"]);case 2:e=n.v,t=e.credentials||{},o=e.credentialMetadata||{},console.log("[CloudHub] Found credentials in storage:",Object.keys(t)),console.log("[CloudHub] Found metadata in storage:",Object.keys(o)),t.aws&&(t.aws.accessKeyId||t.aws.secretAccessKey)&&(console.log("[CloudHub] Found AWS credentials, showing saved state"),this.setCredentialSavedState("aws",!0),this.setProviderConfiguredState("aws",!0),o.aws&&o.aws.region&&(document.getElementById("aws-region").value=o.aws.region)),t.gcp&&(t.gcp.serviceAccount||t.gcp.projectId)&&(console.log("[CloudHub] Found GCP credentials, showing saved state"),this.setCredentialSavedState("gcp",!0),this.setProviderConfiguredState("gcp",!0),o.gcp&&o.gcp.projectId&&(document.getElementById("gcp-project").value=o.gcp.projectId)),t.azure&&(t.azure.clientId||t.azure.clientSecret)&&(console.log("[CloudHub] Found Azure credentials, showing saved state"),this.setCredentialSavedState("azure",!0),this.setProviderConfiguredState("azure",!0),o.azure&&(o.azure.tenantId&&(document.getElementById("azure-tenant-id").value=o.azure.tenantId),o.azure.subscriptionId&&(document.getElementById("azure-subscription-id").value=o.azure.subscriptionId))),t.digitalocean&&t.digitalocean.token&&(console.log("[CloudHub] Found DigitalOcean credentials, showing saved state"),this.setCredentialSavedState("digitalocean",!0),this.setProviderConfiguredState("digitalocean",!0)),console.log("[CloudHub] Finished loading credentials"),n.n=4;break;case 3:n.p=3,a=n.v,console.error("[CloudHub] Error loading credentials:",a);case 4:return n.a(2)}},n,this,[[1,3]])})),function(){return h.apply(this,arguments)})},{key:"loadSettings",value:(m=d(i().m(function n(){var e,t,o;return i().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,chrome.storage.local.get(["settings"]);case 1:e=n.v,t=e.settings||{},document.getElementById("auto-refresh").checked=!1!==t.autoRefresh,document.getElementById("cost-notifications").checked=!1!==t.costNotifications,document.getElementById("security-notifications").checked=!1!==t.securityNotifications,document.getElementById("ssh-method").value=t.sshMethod||"clipboard",document.getElementById("aws-os-user").value=t.awsOsUser||"ubuntu",n.n=3;break;case 2:n.p=2,o=n.v,console.error("Error loading settings:",o);case 3:return n.a(2)}},n,null,[[0,2]])})),function(){return m.apply(this,arguments)})},{key:"updateSetting",value:(b=d(i().m(function n(e,t){var o,a,r;return i().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,chrome.storage.local.get(["settings"]);case 1:return o=n.v,(a=o.settings||{})[e]=t,n.n=2,chrome.storage.local.set({settings:a});case 2:chrome.runtime.sendMessage({action:"updateSetting",key:e,value:t}),n.n=4;break;case 3:n.p=3,r=n.v,console.error("Error updating setting:",r);case 4:return n.a(2)}},n,null,[[0,3]])})),function(n,e){return b.apply(this,arguments)})},{key:"updateLastSync",value:function(){var n=(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});document.getElementById("last-sync").textContent="Last sync: ".concat(n)}},{key:"showNotification",value:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",t=document.createElement("div");t.className="notification notification-".concat(e),t.textContent=n,t.style.cssText="\n      position: fixed;\n      top: 10px;\n      right: 10px;\n      background: ".concat("success"===e?"#28a745":"error"===e?"#dc3545":"#007bff",";\n      color: white;\n      padding: 12px 16px;\n      border-radius: 4px;\n      font-size: 13px;\n      z-index: 1000;\n      animation: slideIn 0.3s ease;\n    "),document.body.appendChild(t),setTimeout(function(){t.remove()},3e3)}},{key:"reauthenticateDigitalOcean",value:function(){chrome.tabs.create({url:"https://cloud.digitalocean.com/login",active:!0}),this.showNotification("DigitalOcean login page opened for reauthentication","info")}},{key:"showLaunchDialog",value:function(){var n=this,e=document.createElement("div");e.innerHTML='\n      <div style="\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0,0,0,0.5);\n        z-index: 10001;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n      " id="launch-modal">\n        <div style="\n          background: white;\n          border-radius: 8px;\n          padding: 20px;\n          max-width: 400px;\n          width: 90%;\n          font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, sans-serif;\n        ">\n          <h3 style="margin: 0 0 16px 0;">Quick Launch Instance</h3>\n          <select id="launch-provider" style="width: 100%; margin-bottom: 12px; padding: 8px;">\n            <option value="aws">AWS EC2</option>\n            <option value="gcp">Google Cloud Compute</option>\n            <option value="azure">Azure VM</option>\n            <option value="digitalocean">DigitalOcean Droplet</option>\n          </select>\n          <input type="text" id="instance-name" placeholder="Instance name" style="width: 100%; margin-bottom: 12px; padding: 8px; box-sizing: border-box;">\n          <select id="instance-size" style="width: 100%; margin-bottom: 16px; padding: 8px;">\n            <option value="small">Small (1 CPU, 1GB RAM)</option>\n            <option value="medium">Medium (2 CPU, 4GB RAM)</option>\n            <option value="large">Large (4 CPU, 8GB RAM)</option>\n          </select>\n          <div style="display: flex; gap: 10px;">\n            <button id="launch-btn" style="\n              background: #667eea;\n              color: white;\n              border: none;\n              padding: 10px 20px;\n              border-radius: 4px;\n              cursor: pointer;\n              flex: 1;\n            ">Launch</button>\n            <button id="launch-cancel-btn" style="\n              background: #6c757d;\n              color: white;\n              border: none;\n              padding: 10px 20px;\n              border-radius: 4px;\n              cursor: pointer;\n              flex: 1;\n            ">Cancel</button>\n          </div>\n        </div>\n      </div>\n    ',document.body.appendChild(e),document.getElementById("launch-btn").addEventListener("click",function(){var t=document.getElementById("launch-provider").value,o=document.getElementById("instance-name").value,a=document.getElementById("instance-size").value;o?(n.launchInstance(t,o,a),e.remove()):alert("Please enter an instance name")}),document.getElementById("launch-cancel-btn").addEventListener("click",function(){e.remove()})}},{key:"showCostAlerts",value:(f=d(i().m(function n(){var t,o,a,r,s,c=this;return i().w(function(n){for(;;)switch(n.p=n.n){case 0:return t=0,o=[],n.p=1,n.n=2,chrome.runtime.sendMessage({action:"refreshAllProviders"});case 2:(a=n.v).success&&Object.entries(a.data).forEach(function(n){var a=e(n,2),r=a[0],i=a[1],s=i.resources?c.calculateEnhancedCost(r,i.resources):"0.00",d=parseFloat(s)||parseFloat(i.estimatedCost)||0;t+=d,d>0&&o.push({provider:r.toUpperCase(),cost:d.toFixed(2)})}),n.n=4;break;case 3:n.p=3,s=n.v,console.error("Error getting cost data:",s);case 4:(r=document.createElement("div")).innerHTML='\n      <div style="\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0,0,0,0.5);\n        z-index: 10001;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n      " id="cost-modal">\n        <div style="\n          background: white;\n          border-radius: 8px;\n          padding: 20px;\n          max-width: 400px;\n          width: 90%;\n          font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, sans-serif;\n        ">\n          <h3 style="margin: 0 0 16px 0;">üí∞ Cost Alerts</h3>\n          <div style="margin-bottom: 16px;">\n            <h4 style="margin: 0 0 8px 0; font-size: 14px;">Current Month Estimate</h4>\n            <div style="font-size: 24px; color: #28a745; font-weight: bold;">$'.concat(t.toFixed(2),'</div>\n            <div style="font-size: 12px; color: #666;">').concat(t>0?"Based on current resource usage":"No active resources detected","</div>\n          </div>\n          ").concat(o.length>0?'\n          <div style="margin-bottom: 16px;">\n            <h4 style="margin: 0 0 8px 0; font-size: 14px;">Cost Breakdown</h4>\n            '.concat(o.map(function(n){return'<div style="font-size: 12px; margin-bottom: 4px;">‚Ä¢ '.concat(n.provider,": $").concat(n.cost,"</div>")}).join(""),"\n          </div>"):"",'\n          <div style="margin-bottom: 16px;">\n            <label style="display: block; margin-bottom: 8px; font-size: 14px;">Monthly Alert Threshold ($)</label>\n            <input type="number" id="cost-threshold" value="200" style="width: 100%; padding: 8px; box-sizing: border-box;">\n          </div>\n          <div style="display: flex; gap: 10px;">\n            <button id="cost-save-btn" style="\n              background: #667eea;\n              color: white;\n              border: none;\n              padding: 10px 20px;\n              border-radius: 4px;\n              cursor: pointer;\n              flex: 1;\n            ">Save Alert</button>\n            <button id="cost-close-btn" style="\n              background: #6c757d;\n              color: white;\n              border: none;\n              padding: 10px 20px;\n              border-radius: 4px;\n              cursor: pointer;\n              flex: 1;\n            ">Close</button>\n          </div>\n        </div>\n      </div>\n    '),document.body.appendChild(r),document.getElementById("cost-save-btn").addEventListener("click",function(){var n=document.getElementById("cost-threshold").value;c.updateSetting("costThreshold",n),c.showNotification("Cost alert set to $".concat(n,"/month"),"success"),r.remove()}),document.getElementById("cost-close-btn").addEventListener("click",function(){r.remove()});case 5:return n.a(2)}},n,null,[[1,3]])})),function(){return f.apply(this,arguments)})},{key:"runSecurityScan",value:function(){this.showNotification("Running security scan...","info"),setTimeout(function(){var n=document.createElement("div");n.innerHTML='\n        <div style="\n          position: fixed;\n          top: 0;\n          left: 0;\n          width: 100%;\n          height: 100%;\n          background: rgba(0,0,0,0.5);\n          z-index: 10001;\n          display: flex;\n          justify-content: center;\n          align-items: center;\n        " id="security-modal">\n          <div style="\n            background: white;\n            border-radius: 8px;\n            padding: 20px;\n            max-width: 500px;\n            width: 90%;\n            font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, sans-serif;\n          ">\n            <h3 style="margin: 0 0 16px 0;">üîí Security Scan Results</h3>\n            <div style="margin-bottom: 16px;">\n              <div style="display: flex; align-items: center; margin-bottom: 8px;">\n                <span style="color: #dc3545; margin-right: 8px;">‚ö†Ô∏è</span>\n                <span style="font-size: 14px;">3 High priority issues found</span>\n              </div>\n              <div style="display: flex; align-items: center; margin-bottom: 8px;">\n                <span style="color: #ffc107; margin-right: 8px;">‚ö†Ô∏è</span>\n                <span style="font-size: 14px;">7 Medium priority issues found</span>\n              </div>\n              <div style="display: flex; align-items: center; margin-bottom: 16px;">\n                <span style="color: #28a745; margin-right: 8px;">‚úÖ</span>\n                <span style="font-size: 14px;">12 Security best practices followed</span>\n              </div>\n            </div>\n            <div style="margin-bottom: 16px;">\n              <h4 style="margin: 0 0 8px 0; font-size: 14px; color: #dc3545;">Critical Issues:</h4>\n              <div style="font-size: 12px; margin-bottom: 4px; padding: 8px; background: #f8f9fa; border-radius: 4px;">‚Ä¢ Security group allows 0.0.0.0/0 on port 22 (SSH)</div>\n              <div style="font-size: 12px; margin-bottom: 4px; padding: 8px; background: #f8f9fa; border-radius: 4px;">‚Ä¢ S3 bucket with public read access</div>\n              <div style="font-size: 12px; margin-bottom: 4px; padding: 8px; background: #f8f9fa; border-radius: 4px;">‚Ä¢ Unencrypted EBS volumes detected</div>\n            </div>\n            <button id="security-close-btn" style="\n              background: #667eea;\n              color: white;\n              border: none;\n              padding: 10px 20px;\n              border-radius: 4px;\n              cursor: pointer;\n              width: 100%;\n            ">Close</button>\n          </div>\n        </div>\n      ',document.body.appendChild(n),document.getElementById("security-close-btn").addEventListener("click",function(){n.remove()})},2e3)}},{key:"createLoadingModal",value:function(n){var e=document.createElement("div");return e.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(0,0,0,0.7);\n      backdrop-filter: blur(8px);\n      z-index: 11000;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      animation: fadeIn 0.3s ease-out;\n    ",e.innerHTML='\n      <div style="\n        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);\n        padding: 40px;\n        border-radius: 20px;\n        text-align: center;\n        box-shadow: \n          0 20px 60px rgba(0, 0, 0, 0.15),\n          0 8px 32px rgba(0, 0, 0, 0.1),\n          inset 0 1px 0 rgba(255, 255, 255, 0.9);\n        border: 1px solid rgba(255, 255, 255, 0.3);\n        animation: slideUp 0.4s cubic-bezier(0.23, 1, 0.320, 1);\n      ">\n        <div style="\n          width: 48px;\n          height: 48px;\n          margin: 0 auto 20px;\n          border: 4px solid rgba(0, 122, 255, 0.2);\n          border-top: 4px solid #007aff;\n          border-radius: 50%;\n          animation: spin 1s linear infinite;\n        "></div>\n        <h3 style="\n          margin: 0 0 8px;\n          font-size: 18px;\n          font-weight: 600;\n          color: #1d1d1f;\n        ">'.concat(n,'</h3>\n        <p style="\n          margin: 0;\n          font-size: 14px;\n          color: #86868b;\n        ">Please wait...</p>\n      </div>\n    '),e}},{key:"showProviderDetails",value:(g=d(i().m(function n(e){var t,o,a,r,s,c=this;return i().w(function(n){for(;;)switch(n.n){case 0:return n.n=1,this.getProviderDetailsData(e);case 1:t=n.v,o=t.resources||[],(a=document.createElement("div")).style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(0,0,0,0.6);\n      backdrop-filter: blur(8px);\n      z-index: 10000;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      animation: fadeIn 0.3s ease-out;\n    ",a.innerHTML='\n      <div style="\n        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);\n        width: 650px;\n        max-height: 80vh;\n        border-radius: 20px;\n        padding: 28px;\n        display: flex;\n        flex-direction: column;\n        box-shadow: \n          0 20px 60px rgba(0, 0, 0, 0.15),\n          0 8px 32px rgba(0, 0, 0, 0.1),\n          inset 0 1px 0 rgba(255, 255, 255, 0.9);\n        border: 1px solid rgba(255, 255, 255, 0.3);\n        animation: slideUp 0.4s cubic-bezier(0.23, 1, 0.320, 1);\n      ">\n        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; padding-bottom: 16px; border-bottom: 0.5px solid rgba(0, 0, 0, 0.08);">\n          <h3 style="\n            margin: 0;\n            font-size: 24px;\n            font-weight: 700;\n            color: #1d1d1f;\n            background: linear-gradient(135deg, #1d1d1f 0%, #424245 100%);\n            -webkit-background-clip: text;\n            -webkit-text-fill-color: transparent;\n            background-clip: text;\n          ">'.concat(this.getProviderIcon(e,!0)," ").concat(e.toUpperCase(),' Instances</h3>\n          <button id="close-modal-btn" style="\n            background: rgba(0, 0, 0, 0.06);\n            border: none;\n            border-radius: 50%;\n            width: 32px;\n            height: 32px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-size: 16px;\n            cursor: pointer;\n            color: #86868b;\n            transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n            backdrop-filter: blur(10px);\n          ">√ó</button>\n        </div>\n        \n        <input \n          type="text" \n          id="search-input"\n          placeholder="üîç Search instances by name, status, or IP..."\n          style="\n            width: 100%;\n            padding: 16px 20px;\n            margin-bottom: 16px;\n            border: 0.5px solid rgba(0, 0, 0, 0.15);\n            border-radius: 12px;\n            box-sizing: border-box;\n            font-size: 14px;\n            font-weight: 400;\n            background: rgba(255, 255, 255, 0.9);\n            backdrop-filter: blur(20px);\n            transition: all 0.25s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n            box-shadow: \n              0 2px 8px rgba(0, 0, 0, 0.04),\n              inset 0 1px 0 rgba(255, 255, 255, 0.9);\n          "\n        >\n        \n        <div style="\n          flex: 1;\n          overflow-y: auto;\n          border-radius: 12px;\n          padding: 4px;\n          scrollbar-width: thin;\n          scrollbar-color: rgba(0, 122, 255, 0.3) transparent;\n        ">\n          ').concat(o.map(function(n){var t="running"===n.status||"active"===n.status?"#28a745":"stopped"===n.status||"deallocated"===n.status?"#dc3545":"#ffc107",o=("running"===n.status||"active"===n.status)&&n.publicIp;return'\n              <div class="simple-card" style="\n                background: rgba(255, 255, 255, 0.95);\n                backdrop-filter: blur(20px) saturate(180%);\n                border: 0.5px solid rgba(255, 255, 255, 0.3);\n                padding: 20px;\n                margin-bottom: 12px;\n                border-radius: 16px;\n                display: block;\n                width: 100%;\n                box-sizing: border-box;\n                cursor: pointer;\n                transition: all 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n                box-shadow: \n                  0 4px 16px rgba(0, 0, 0, 0.06),\n                  0 1px 4px rgba(0, 0, 0, 0.04),\n                  inset 0 1px 0 rgba(255, 255, 255, 0.7);\n                position: relative;\n                overflow: hidden;\n              ">\n                <div style="\n                  display: flex; \n                  justify-content: space-between; \n                  align-items: flex-start; \n                  margin-bottom: 12px;\n                ">\n                  <div style="flex: 1;">\n                    <div style="\n                      font-weight: 600; \n                      font-size: 16px; \n                      margin-bottom: 4px; \n                      color: #1d1d1f;\n                      line-height: 1.4;\n                    ">'.concat(n.name,"</div>\n                    <div style=\"\n                      font-size: 12px; \n                      color: #86868b; \n                      font-family: 'SF Mono', Monaco, monospace;\n                      background: rgba(0, 0, 0, 0.04);\n                      padding: 2px 6px;\n                      border-radius: 4px;\n                      display: inline-block;\n                    \">").concat(n.id.replace("".concat(e,":"),""),'</div>\n                  </div>\n                  <div style="text-align: right;">\n                    <span style="\n                      background: ').concat(t,";\n                      color: white;\n                      padding: 4px 10px;\n                      border-radius: 12px;\n                      font-size: 11px;\n                      font-weight: 600;\n                      text-transform: uppercase;\n                      letter-spacing: 0.5px;\n                      box-shadow: 0 2px 8px ").concat(t,'33;\n                    ">').concat(n.status,'</span>\n                  </div>\n                </div>\n                \n                <div style="\n                  display: flex; \n                  justify-content: space-between; \n                  align-items: center; \n                  margin-bottom: 16px;\n                  padding: 12px 0;\n                  border-top: 0.5px solid rgba(0, 0, 0, 0.06);\n                  border-bottom: 0.5px solid rgba(0, 0, 0, 0.06);\n                ">\n                  <div style="font-size: 13px; color: #86868b;">\n                    ').concat(n.publicIp?"üåê ".concat(n.publicIp):"üîí No public IP","\n                    ").concat(n.region?" ‚Ä¢ üìç ".concat(n.region):"",'\n                  </div>\n                </div>\n                \n                <div style="display: flex; gap: 8px; flex-wrap: wrap;">\n                  ').concat(o?'<button class="ssh-btn" data-instance-id="'.concat(n.id,'" data-instance-name="').concat(n.name,'" data-public-ip="').concat(n.publicIp,'" data-region="').concat(n.region||"",'" style="\n                    background: linear-gradient(135deg, #007aff 0%, #005ce6 100%);\n                    color: white;\n                    border: none;\n                    padding: 8px 16px;\n                    border-radius: 8px;\n                    cursor: pointer;\n                    font-size: 12px;\n                    font-weight: 600;\n                    transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n                    box-shadow: 0 2px 8px rgba(0, 122, 255, 0.25);\n                    backdrop-filter: blur(20px);\n                  ">‚ö° SSH</button>'):"",'\n                  <button class="console-btn" data-instance-id="').concat(n.id,'" data-region="').concat(n.region||"",'" style="\n                    background: rgba(0, 0, 0, 0.04);\n                    color: #1d1d1f;\n                    border: 0.5px solid rgba(0, 0, 0, 0.1);\n                    padding: 8px 16px;\n                    border-radius: 8px;\n                    cursor: pointer;\n                    font-size: 12px;\n                    font-weight: 600;\n                    transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n                    box-shadow: \n                      0 2px 8px rgba(0, 0, 0, 0.04),\n                      inset 0 1px 0 rgba(255, 255, 255, 0.7);\n                    backdrop-filter: blur(20px);\n                  ">üñ•Ô∏è Console</button>\n                  ').concat("digitalocean"===e?'<button class="tags-btn" data-instance-id="'.concat(n.id,'" data-instance-name="').concat(n.name,"\" data-tags='").concat(JSON.stringify(n.tags||[]).replace(/'/g,"&apos;"),'\' style="\n                    background: linear-gradient(135deg, #6f42c1 0%, #563d7c 100%);\n                    color: white;\n                    border: none;\n                    padding: 8px 16px;\n                    border-radius: 8px;\n                    cursor: pointer;\n                    font-size: 12px;\n                    font-weight: 600;\n                    transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n                    box-shadow: 0 2px 8px rgba(111, 66, 193, 0.25);\n                    backdrop-filter: blur(20px);\n                  ">Tags ').concat(n.tags&&n.tags.length>0?"(".concat(n.tags.length,")"):"","</button>"):"","\n                  ").concat("digitalocean"===e?'<button class="delete-btn" data-instance-id="'.concat(n.id,'" data-instance-name="').concat(n.name,'" style="\n                    background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);\n                    color: white;\n                    border: none;\n                    padding: 8px 16px;\n                    border-radius: 8px;\n                    cursor: pointer;\n                    font-size: 12px;\n                    font-weight: 600;\n                    transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n                    box-shadow: 0 2px 8px rgba(220, 53, 69, 0.25);\n                    backdrop-filter: blur(20px);\n                  ">üóëÔ∏è Delete</button>'):"","\n                </div>\n              </div>\n            ")}).join(""),"\n        </div>\n      </div>\n    "),(r=document.createElement("style")).textContent="\n      @keyframes fadeIn {\n        from { opacity: 0; }\n        to { opacity: 1; }\n      }\n      @keyframes slideUp {\n        from { \n          opacity: 0;\n          transform: scale(0.9) translateY(40px);\n        }\n        to { \n          opacity: 1;\n          transform: scale(1) translateY(0);\n        }\n      }\n      .simple-card:hover {\n        transform: translateY(-2px) scale(1.01) !important;\n        border-color: rgba(0, 122, 255, 0.3) !important;\n        box-shadow: \n          0 12px 32px rgba(0, 122, 255, 0.1),\n          0 4px 16px rgba(0, 0, 0, 0.08),\n          inset 0 1px 0 rgba(255, 255, 255, 0.9) !important;\n      }\n      #close-modal-btn:hover {\n        background: rgba(0, 0, 0, 0.12) !important;\n        color: #1d1d1f !important;\n        transform: scale(1.1) !important;\n      }\n      #search-input:focus {\n        outline: none !important;\n        border-color: #007aff !important;\n        box-shadow: \n          0 0 0 4px rgba(0, 122, 255, 0.15),\n          0 4px 16px rgba(0, 122, 255, 0.1),\n          inset 0 1px 0 rgba(255, 255, 255, 1) !important;\n        transform: scale(1.01) translateY(-1px) !important;\n        background: rgba(255, 255, 255, 1) !important;\n      }\n      .ssh-btn:hover {\n        background: linear-gradient(135deg, #0056cc 0%, #004bb8 100%) !important;\n        transform: translateY(-1px) scale(1.02) !important;\n        box-shadow: 0 4px 16px rgba(0, 122, 255, 0.35) !important;\n      }\n      .console-btn:hover {\n        background: rgba(0, 122, 255, 0.08) !important;\n        border-color: rgba(0, 122, 255, 0.2) !important;\n        color: #007aff !important;\n        transform: translateY(-1px) scale(1.02) !important;\n        box-shadow: 0 4px 12px rgba(0, 122, 255, 0.15) !important;\n      }\n      .delete-btn:hover {\n        background: linear-gradient(135deg, #c82333 0%, #a71e2a 100%) !important;\n        transform: translateY(-1px) scale(1.02) !important;\n        box-shadow: 0 4px 16px rgba(220, 53, 69, 0.35) !important;\n      }\n      .tags-btn:hover {\n        background: linear-gradient(135deg, #563d7c 0%, #4a2e6b 100%) !important;\n        transform: translateY(-1px) scale(1.02) !important;\n        box-shadow: 0 4px 16px rgba(111, 66, 193, 0.35) !important;\n      }\n      .ssh-btn:active, .console-btn:active, .delete-btn:active, .tags-btn:active {\n        transform: scale(0.98) !important;\n        transition: transform 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94) !important;\n      }\n    ",document.head.appendChild(r),document.body.appendChild(a),a.querySelector("#close-modal-btn").addEventListener("click",function(){a.style.opacity="0",a.style.transform="scale(0.95)",setTimeout(function(){return a.remove()},200)}),(s=a.querySelector("#search-input")).addEventListener("input",function(n){var e=n.target.value.toLowerCase();a.querySelectorAll(".simple-card").forEach(function(n){var t=n.textContent.toLowerCase();n.style.display=t.includes(e)?"block":"none"})}),setTimeout(function(){return s.focus()},100),a.querySelectorAll(".ssh-btn").forEach(function(n){n.addEventListener("click",function(){var t=n.dataset.instanceId,o=n.dataset.instanceName,a=n.dataset.publicIp,r=n.dataset.region;c.handleInstanceSSH(e,t,o,a,r)})}),a.querySelectorAll(".console-btn").forEach(function(n){n.addEventListener("click",function(){var t=n.dataset.instanceId,o=n.dataset.region;c.openInstanceConsole(e,t.replace("".concat(e,":"),""),o)})}),a.querySelectorAll(".delete-btn").forEach(function(n){n.addEventListener("click",function(){var t=n.dataset.instanceId,o=n.dataset.instanceName;c.handleInstanceDelete(e,t,o)})}),a.querySelectorAll(".tags-btn").forEach(function(n){n.addEventListener("click",function(){var t=n.textContent;n.textContent="Loading...",n.disabled=!0,n.style.opacity="0.6",setTimeout(function(){var o=n.dataset.instanceId,a=n.dataset.instanceName,r=JSON.parse(n.dataset.tags||"[]");c.showTagsModal(e,o,a,r),n.textContent=t,n.disabled=!1,n.style.opacity="1"},300)})}),a.addEventListener("click",function(n){n.target===a&&(a.style.opacity="0",a.style.transform="scale(0.95)",setTimeout(function(){return a.remove()},200))});case 2:return n.a(2)}},n,this)})),function(n){return g.apply(this,arguments)})},{key:"showDeleteConfirmation",value:(p=d(i().m(function n(e){return i().w(function(n){for(;;)if(0===n.n)return n.a(2,new Promise(function(n){var t=document.createElement("div");t.style.cssText="\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0,0,0,0.7);\n        backdrop-filter: blur(12px);\n        z-index: 15000;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        animation: fadeIn 0.3s ease-out;\n      ",t.innerHTML='\n        <div style="\n          background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);\n          width: 420px;\n          border-radius: 24px;\n          padding: 32px;\n          box-shadow: \n            0 32px 80px rgba(220, 53, 69, 0.15),\n            0 12px 40px rgba(0, 0, 0, 0.15),\n            inset 0 1px 0 rgba(255, 255, 255, 0.9);\n          border: 1px solid rgba(220, 53, 69, 0.1);\n          animation: slideUp 0.4s cubic-bezier(0.23, 1, 0.320, 1);\n          text-align: center;\n        ">\n          <div style="\n            width: 64px;\n            height: 64px;\n            margin: 0 auto 24px;\n            background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);\n            border-radius: 50%;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-size: 28px;\n            color: white;\n            box-shadow: 0 8px 24px rgba(220, 53, 69, 0.3);\n          ">üóëÔ∏è</div>\n          \n          <h3 style="\n            margin: 0 0 16px;\n            font-size: 20px;\n            font-weight: 700;\n            color: #1d1d1f;\n            line-height: 1.3;\n          ">Delete Droplet</h3>\n          \n          <p style="\n            margin: 0 0 8px;\n            font-size: 16px;\n            color: #1d1d1f;\n            line-height: 1.4;\n          ">Are you sure you want to delete</p>\n          \n          <p style="\n            margin: 0 0 20px;\n            font-size: 18px;\n            font-weight: 600;\n            color: #dc3545;\n            background: rgba(220, 53, 69, 0.08);\n            padding: 12px 16px;\n            border-radius: 12px;\n            border: 1px solid rgba(220, 53, 69, 0.15);\n          ">"'.concat(e,'"</p>\n          \n          <div style="\n            background: rgba(220, 53, 69, 0.08);\n            border: 1px solid rgba(220, 53, 69, 0.15);\n            border-radius: 16px;\n            padding: 20px;\n            margin-bottom: 32px;\n            text-align: left;\n          ">\n            <div style="\n              display: flex;\n              align-items: center;\n              margin-bottom: 12px;\n              font-size: 14px;\n              font-weight: 600;\n              color: #dc3545;\n            ">\n              ‚ö†Ô∏è <span style="margin-left: 8px;">Warning</span>\n            </div>\n            <ul style="\n              margin: 0;\n              padding-left: 20px;\n              font-size: 13px;\n              color: #666;\n              line-height: 1.5;\n            ">\n              <li>This action <strong>cannot be undone</strong></li>\n              <li>All data on this droplet will be <strong>permanently lost</strong></li>\n              <li>Any attached volumes will be detached</li>\n              <li>Reserved IP addresses will be released</li>\n            </ul>\n          </div>\n          \n          <div style="\n            display: flex;\n            gap: 12px;\n            justify-content: center;\n          ">\n            <button id="cancel-delete" style="\n              background: rgba(0, 0, 0, 0.04);\n              color: #1d1d1f;\n              border: 0.5px solid rgba(0, 0, 0, 0.1);\n              padding: 12px 24px;\n              border-radius: 12px;\n              cursor: pointer;\n              font-size: 14px;\n              font-weight: 600;\n              transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n              box-shadow: \n                0 2px 8px rgba(0, 0, 0, 0.04),\n                inset 0 1px 0 rgba(255, 255, 255, 0.7);\n              backdrop-filter: blur(20px);\n              min-width: 100px;\n            ">Cancel</button>\n            \n            <button id="confirm-delete" style="\n              background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);\n              color: white;\n              border: none;\n              padding: 12px 24px;\n              border-radius: 12px;\n              cursor: pointer;\n              font-size: 14px;\n              font-weight: 600;\n              transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n              box-shadow: 0 4px 16px rgba(220, 53, 69, 0.35);\n              backdrop-filter: blur(20px);\n              min-width: 140px;\n            ">üóëÔ∏è Delete Forever</button>\n          </div>\n        </div>\n      ');var o=document.createElement("style");o.textContent="\n        #cancel-delete:hover {\n          background: rgba(0, 122, 255, 0.08) !important;\n          border-color: rgba(0, 122, 255, 0.2) !important;\n          color: #007aff !important;\n          transform: translateY(-1px) scale(1.02) !important;\n          box-shadow: 0 4px 12px rgba(0, 122, 255, 0.15) !important;\n        }\n        #confirm-delete:hover {\n          background: linear-gradient(135deg, #c82333 0%, #a71e2a 100%) !important;\n          transform: translateY(-1px) scale(1.02) !important;\n          box-shadow: 0 6px 20px rgba(220, 53, 69, 0.45) !important;\n        }\n        #cancel-delete:active, #confirm-delete:active {\n          transform: scale(0.98) !important;\n          transition: transform 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94) !important;\n        }\n      ",document.head.appendChild(o),document.body.appendChild(t),t.querySelector("#cancel-delete").addEventListener("click",function(){t.style.opacity="0",t.style.transform="scale(0.95)",setTimeout(function(){t.remove(),o.remove()},200),n(!1)}),t.querySelector("#confirm-delete").addEventListener("click",function(){t.style.opacity="0",t.style.transform="scale(0.95)",setTimeout(function(){t.remove(),o.remove()},200),n(!0)}),t.addEventListener("click",function(e){e.target===t&&(t.style.opacity="0",t.style.transform="scale(0.95)",setTimeout(function(){t.remove(),o.remove()},200),n(!1))});var a=function(e){"Escape"===e.key&&(t.style.opacity="0",t.style.transform="scale(0.95)",setTimeout(function(){t.remove(),o.remove()},200),document.removeEventListener("keydown",a),n(!1))};document.addEventListener("keydown",a)}))},n)})),function(n){return p.apply(this,arguments)})},{key:"showTagsModal",value:(u=d(i().m(function n(e,t,o,a){var r,s,c,l,u,p,g,f,b=this;return i().w(function(n){for(;;)switch(n.n){case 0:(r=document.querySelector(".tags-modal"))&&r.remove(),(s=document.createElement("div")).className="tags-modal",s.style.cssText="\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100%;\n      background: rgba(0,0,0,0.6);\n      backdrop-filter: blur(8px);\n      z-index: 12000;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      animation: fadeIn 0.3s ease-out;\n    ",s.innerHTML='\n      <div style="\n        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);\n        width: 500px;\n        max-height: 70vh;\n        border-radius: 20px;\n        padding: 28px;\n        box-shadow: \n          0 20px 60px rgba(40, 167, 69, 0.15),\n          0 8px 32px rgba(0, 0, 0, 0.1),\n          inset 0 1px 0 rgba(255, 255, 255, 0.9);\n        border: 1px solid rgba(40, 167, 69, 0.1);\n        animation: slideUp 0.4s cubic-bezier(0.23, 1, 0.320, 1);\n        display: flex;\n        flex-direction: column;\n      ">\n        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 24px; padding-bottom: 16px; border-bottom: 0.5px solid rgba(0, 0, 0, 0.08);">\n          <div style="display: flex; align-items: center; gap: 12px;">\n            <div style="\n              width: 48px;\n              height: 48px;\n              background: linear-gradient(135deg, #6f42c1 0%, #563d7c 100%);\n              border-radius: 50%;\n              display: flex;\n              align-items: center;\n              justify-content: center;\n              font-size: 20px;\n              color: white;\n              box-shadow: 0 4px 16px rgba(111, 66, 193, 0.3);\n            ">T</div>\n            <div>\n              <h3 style="margin: 0 0 4px; font-size: 20px; font-weight: 700; color: #1d1d1f;">'.concat(o,'</h3>\n              <p style="margin: 0; font-size: 14px; color: #86868b;">Manage Droplet Tags</p>\n            </div>\n          </div>\n          <button id="tags-modal-close" style="\n            background: rgba(0, 0, 0, 0.06);\n            border: none;\n            border-radius: 50%;\n            width: 32px;\n            height: 32px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            font-size: 16px;\n            cursor: pointer;\n            color: #86868b;\n            transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n          ">√ó</button>\n        </div>\n        \n        <div style="margin-bottom: 20px;">\n          <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">\n            <h4 style="margin: 0; font-size: 16px; font-weight: 600; color: #1d1d1f;">Current Tags (').concat(a.length,')</h4>\n            <button id="refresh-tags-btn" style="\n              background: rgba(0, 122, 255, 0.08);\n              color: #007aff;\n              border: 0.5px solid rgba(0, 122, 255, 0.2);\n              padding: 6px 12px;\n              border-radius: 8px;\n              cursor: pointer;\n              font-size: 12px;\n              font-weight: 600;\n              transition: all 0.2s;\n              display: flex;\n              align-items: center;\n              gap: 4px;\n            " title="Refresh tags from DigitalOcean">\n              Refresh\n            </button>\n          </div>\n          <div id="current-tags" style="\n            min-height: 60px;\n            border: 1px solid rgba(0, 0, 0, 0.1);\n            border-radius: 12px;\n            padding: 16px;\n            background: rgba(255, 255, 255, 0.8);\n            backdrop-filter: blur(20px);\n          ">\n            ').concat(0===a.length?'<div style="text-align: center; color: #86868b; font-size: 14px; padding: 20px;">No tags yet</div>':a.map(function(n){return'\n                <span class="tag-item" style="\n                  display: inline-flex;\n                  align-items: center;\n                  background: linear-gradient(135deg, #6f42c1 0%, #563d7c 100%);\n                  color: white;\n                  padding: 6px 12px;\n                  border-radius: 16px;\n                  font-size: 12px;\n                  font-weight: 500;\n                  margin: 4px 6px 4px 0;\n                  box-shadow: 0 2px 8px rgba(111, 66, 193, 0.2);\n                ">\n                  '.concat(n,'\n                  <button class="remove-tag-btn" style="\n                    background: none;\n                    border: none;\n                    color: white;\n                    margin-left: 6px;\n                    cursor: pointer;\n                    font-size: 14px;\n                    width: 16px;\n                    height: 16px;\n                    display: flex;\n                    align-items: center;\n                    justify-content: center;\n                    border-radius: 50%;\n                    transition: background 0.2s;\n                  ">√ó</button>\n                </span>\n              ')}).join(""),'\n          </div>\n        </div>\n        \n        <div style="margin-bottom: 24px;">\n          <h4 style="margin: 0 0 12px; font-size: 16px; font-weight: 600; color: #1d1d1f;">Add New Tag</h4>\n          <div style="display: flex; gap: 12px;">\n            <input \n              type="text" \n              id="new-tag-input"\n              placeholder="Enter tag name..."\n              style="\n                flex: 1;\n                padding: 12px 16px;\n                border: 1px solid rgba(0, 0, 0, 0.15);\n                border-radius: 12px;\n                font-size: 14px;\n                box-sizing: border-box;\n                background: rgba(255, 255, 255, 0.9);\n                backdrop-filter: blur(20px);\n                transition: all 0.2s;\n              "\n            >\n            <button id="add-tag-btn" style="\n              background: linear-gradient(135deg, #6f42c1 0%, #563d7c 100%);\n              color: white;\n              border: none;\n              padding: 12px 20px;\n              border-radius: 12px;\n              cursor: pointer;\n              font-size: 14px;\n              font-weight: 600;\n              transition: all 0.2s;\n              box-shadow: 0 2px 8px rgba(111, 66, 193, 0.25);\n            ">Add Tag</button>\n          </div>\n        </div>\n        \n        <div style="display: flex; gap: 12px; justify-content: flex-end; padding-top: 16px; border-top: 0.5px solid rgba(0, 0, 0, 0.08);">\n          <button id="cancel-tags" style="\n            background: rgba(0, 0, 0, 0.04);\n            color: #1d1d1f;\n            border: 0.5px solid rgba(0, 0, 0, 0.1);\n            padding: 12px 24px;\n            border-radius: 12px;\n            cursor: pointer;\n            font-size: 14px;\n            font-weight: 600;\n            transition: all 0.2s;\n          ">Cancel</button>\n          <button id="save-tags" style="\n            background: linear-gradient(135deg, #6f42c1 0%, #563d7c 100%);\n            color: white;\n            border: none;\n            padding: 12px 24px;\n            border-radius: 12px;\n            cursor: pointer;\n            font-size: 14px;\n            font-weight: 600;\n            transition: all 0.2s;\n            box-shadow: 0 2px 8px rgba(111, 66, 193, 0.25);\n          ">Save Tags</button>\n        </div>\n      </div>\n    '),document.body.appendChild(s),c=s.querySelector("#new-tag-input"),l=s.querySelector("#add-tag-btn"),u=s.querySelector("#current-tags"),p=function(){var n=c.value.trim();if(n&&!g().includes(n)){var e=document.createElement("span");e.style.cssText="\n          display: inline-flex;\n          align-items: center;\n          background: linear-gradient(135deg, #6f42c1 0%, #563d7c 100%);\n          color: white;\n          padding: 6px 12px;\n          border-radius: 16px;\n          font-size: 12px;\n          font-weight: 500;\n          margin: 4px 6px 4px 0;\n          box-shadow: 0 2px 8px rgba(111, 66, 193, 0.2);\n        ",e.className="tag-item",e.innerHTML="\n          ".concat(n,'\n          <button class="remove-tag-btn" style="\n            background: none;\n            border: none;\n            color: white;\n            margin-left: 6px;\n            cursor: pointer;\n            font-size: 14px;\n            width: 16px;\n            height: 16px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n            border-radius: 50%;\n            transition: background 0.2s;\n          ">√ó</button>\n        ');var t=u.querySelector('div[style*="text-align: center"]');t&&t.remove(),u.appendChild(e),c.value=""}},g=function(){return Array.from(u.querySelectorAll("span")).map(function(n){return n.textContent.trim().replace("√ó","")})},l.addEventListener("click",p),c.addEventListener("keypress",function(n){"Enter"===n.key&&p()}),u.addEventListener("click",function(n){n.target.classList.contains("remove-tag-btn")&&n.target.parentElement.remove()}),u.addEventListener("mouseover",function(n){n.target.classList.contains("remove-tag-btn")&&(n.target.style.background="rgba(255,255,255,0.2)")}),u.addEventListener("mouseout",function(n){n.target.classList.contains("remove-tag-btn")&&(n.target.style.background="none")}),f=function(){s.style.opacity="0",s.style.transform="scale(0.95)",setTimeout(function(){return s.remove()},200)},s.querySelector("#tags-modal-close").addEventListener("click",f),s.querySelector("#cancel-tags").addEventListener("click",f),s.querySelector("#refresh-tags-btn").addEventListener("click",d(i().m(function n(){var e,o,a,r,c;return i().w(function(n){for(;;)switch(n.p=n.n){case 0:return e=s.querySelector("#refresh-tags-btn"),o=e.textContent,e.textContent="Loading...",e.disabled=!0,e.style.opacity="0.6",n.p=1,n.n=2,chrome.runtime.sendMessage({action:"getDropletTags",instanceId:t});case 2:(a=n.v).success?(u.innerHTML="",0===(r=a.tags||[]).length?u.innerHTML='<div style="text-align: center; color: #86868b; font-size: 14px; padding: 20px;">No tags yet</div>':r.forEach(function(n){var e=document.createElement("span");e.className="tag-item",e.style.cssText="\n                display: inline-flex;\n                align-items: center;\n                background: linear-gradient(135deg, #6f42c1 0%, #563d7c 100%);\n                color: white;\n                padding: 6px 12px;\n                border-radius: 16px;\n                font-size: 12px;\n                font-weight: 500;\n                margin: 4px 6px 4px 0;\n                box-shadow: 0 2px 8px rgba(111, 66, 193, 0.2);\n              ",e.innerHTML="\n                ".concat(n,'\n                <button class="remove-tag-btn" style="\n                  background: none;\n                  border: none;\n                  color: white;\n                  margin-left: 6px;\n                  cursor: pointer;\n                  font-size: 14px;\n                  width: 16px;\n                  height: 16px;\n                  display: flex;\n                  align-items: center;\n                  justify-content: center;\n                  border-radius: 50%;\n                  transition: background 0.2s;\n                ">√ó</button>\n              '),u.appendChild(e)}),s.querySelector("h4").textContent="Current Tags (".concat(r.length,")"),b.showNotification("Tags refreshed","success")):b.showNotification("Failed to refresh tags: ".concat(a.error),"error"),n.n=4;break;case 3:n.p=3,c=n.v,console.error("Error refreshing tags:",c),b.showNotification("Error refreshing tags","error");case 4:return n.p=4,e.textContent=o,e.disabled=!1,e.style.opacity="1",n.f(4);case 5:return n.a(2)}},n,null,[[1,3,4,5]])}))),s.querySelector("#save-tags").addEventListener("click",d(i().m(function n(){var a,r,c,d,l,u,p;return i().w(function(n){for(;;)switch(n.p=n.n){case 0:return a=g(),console.log("Saving tags for",o,":",a),r=s.querySelector("#save-tags"),c=s.querySelector("#cancel-tags"),d=r.textContent,r.innerHTML='\n        <div style="display: flex; align-items: center; gap: 8px;">\n          <div style="\n            width: 14px; \n            height: 14px; \n            border: 2px solid rgba(255,255,255,0.3); \n            border-top: 2px solid white; \n            border-radius: 50%; \n            animation: spin 1s linear infinite;\n          "></div>\n          Saving Tags...\n        </div>\n      ',r.disabled=!0,c.disabled=!0,r.style.opacity="0.8",document.querySelector("#spinner-animation")||((l=document.createElement("style")).id="spinner-animation",l.textContent="\n          @keyframes spin {\n            0% { transform: rotate(0deg); }\n            100% { transform: rotate(360deg); }\n          }\n        ",document.head.appendChild(l)),n.p=1,n.n=2,chrome.runtime.sendMessage({action:"updateDropletTags",instanceId:t,instanceName:o,tags:a});case 2:(u=n.v).success?(r.innerHTML='\n            <div style="display: flex; align-items: center; gap: 8px;">\n              <div style="color: white; font-size: 16px;">‚úì</div>\n              Saved!\n            </div>\n          ',setTimeout(function(){b.showNotification("Tags updated for ".concat(o),"success"),f(),b.providerCache={},b.lastFetchTime=null,console.log("[CloudHub] Cleared cache after tag update"),setTimeout(function(){b.showProviderDetails(e)},500)},800)):(r.textContent=d,r.disabled=!1,c.disabled=!1,r.style.opacity="1",b.showNotification("Failed to update tags: ".concat(u.error),"error")),n.n=4;break;case 3:n.p=3,p=n.v,console.error("Error updating tags:",p),r.textContent=d,r.disabled=!1,c.disabled=!1,r.style.opacity="1",b.showNotification("Error updating tags","error");case 4:return n.a(2)}},n,null,[[1,3]])}))),s.addEventListener("click",function(n){n.target===s&&f()}),setTimeout(function(){return c.focus()},100);case 1:return n.a(2)}},n)})),function(n,e,t,o){return u.apply(this,arguments)})},{key:"createInstanceCard",value:function(n,e){var t="running"===n.status||"active"===n.status?"#28a745":"stopped"===n.status||"deallocated"===n.status?"#dc3545":"#ffc107",o=("running"===n.status||"active"===n.status)&&n.publicIp;return'\n      <div class="instance-card" \n           data-instance-id="'.concat(n.id,'" \n           data-instance-name="').concat(n.name,'"\n           data-public-ip="').concat(n.publicIp||"",'"\n           data-status="').concat(n.status,'"\n           data-region="').concat(n.region||"",'"\n           style="\n             display: block;\n             width: 100%;\n             border: 1px solid #e1e5e9;\n             border-radius: 8px;\n             padding: 16px;\n             margin-bottom: 12px;\n             cursor: ').concat(o?"pointer":"default",";\n             transition: all 0.2s;\n             background: ").concat(o?"white":"#f8f9fa",";\n             box-sizing: border-box;\n             ").concat(o?"box-shadow: 0 2px 4px rgba(0,0,0,0.1);":"",'\n           "\n           data-can-ssh="').concat(o,'">\n        \n        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px;">\n          <div style="flex: 1;">\n            <div style="font-weight: 600; font-size: 16px; margin-bottom: 4px; color: #333;">\n              ').concat(n.name,'\n            </div>\n            <div style="font-size: 12px; color: #666; font-family: monospace;">\n              ').concat(n.id.replace("".concat(e,":"),""),'\n            </div>\n          </div>\n          <div style="text-align: right;">\n            <span style="\n              background: ').concat(t,';\n              color: white;\n              padding: 2px 8px;\n              border-radius: 12px;\n              font-size: 11px;\n              font-weight: 500;\n            ">').concat(n.status,'</span>\n          </div>\n        </div>\n        \n        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;">\n          <div style="font-size: 13px; color: #86868b;">\n            ').concat(n.publicIp?"üåê ".concat(n.publicIp):"üîí No public IP","\n            ").concat(n.region?" ‚Ä¢ ".concat(n.region):"",'\n          </div>\n        </div>\n        \n        <div class="instance-actions" style="display: flex; gap: 8px; margin-top: 12px; padding-top: 12px; border-top: 0.5px solid rgba(0, 0, 0, 0.08);">\n          ').concat(o?'\n            <button class="instance-action-btn ssh-btn" data-action="ssh" style="\n              flex: 1;\n              background: linear-gradient(135deg, #007aff 0%, #005ce6 100%);\n              color: white;\n              border: none;\n              border-radius: 8px;\n              padding: 8px 12px;\n              font-size: 11px;\n              font-weight: 600;\n              cursor: pointer;\n              transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n              box-shadow: 0 2px 8px rgba(0, 122, 255, 0.2);\n            ">\n              ‚ö° SSH\n            </button>\n          ':"",'\n          <button class="instance-action-btn console-btn" data-action="console" style="\n            flex: 1;\n            background: rgba(0, 0, 0, 0.04);\n            color: #1d1d1f;\n            border: 0.5px solid rgba(0, 0, 0, 0.1);\n            border-radius: 8px;\n            padding: 8px 12px;\n            font-size: 11px;\n            font-weight: 600;\n            cursor: pointer;\n            transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n          ">\n            üñ•Ô∏è Console\n          </button>\n          ').concat("digitalocean"===e?'\n            <button class="instance-action-btn delete-btn" data-action="delete" style="\n              background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);\n              color: white;\n              border: none;\n              border-radius: 8px;\n              padding: 8px 12px;\n              font-size: 11px;\n              font-weight: 600;\n              cursor: pointer;\n              transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);\n              box-shadow: 0 2px 8px rgba(220, 53, 69, 0.2);\n            ">\n              üóëÔ∏è Delete\n            </button>\n          ':"","\n        </div>\n        </div>\n        \n        ").concat(n.createdAt?'\n          <div style="font-size: 11px; color: #999; margin-top: 8px; border-top: 1px solid #f1f3f4; padding-top: 8px;">\n            Created: '.concat(new Date(n.createdAt).toLocaleDateString(),"\n          </div>\n        "):"","\n      </div>\n    ")}},{key:"handleInstanceSSH",value:(c=d(i().m(function n(e,t,o,a){var r,s,c,d,l,u,p=arguments;return i().w(function(n){for(;;)switch(n.p=n.n){case 0:if(r=p.length>4&&void 0!==p[4]?p[4]:"",(s=document.getElementById("provider-modal"))&&s.remove(),this.showNotification("Connecting to ".concat(o,"..."),"info"),n.p=1,c="ubuntu","aws"!==e){n.n=3;break}return n.n=2,chrome.storage.local.get(["settings"]);case 2:l=n.v,c=(null===(d=l.settings)||void 0===d?void 0:d.awsOsUser)||"ubuntu";case 3:return n.n=4,chrome.runtime.sendMessage({action:"simulateSSHClick",provider:e,instanceId:t.replace("".concat(e,":"),""),instanceName:o,publicIp:a,region:r,osUser:c});case 4:n.v.success?this.showNotification("SSH connection initiated for ".concat(o),"success"):this.openCloudProviderConsole(e,t.replace("".concat(e,":"),"")),n.n=6;break;case 5:n.p=5,u=n.v,console.error("Error initiating SSH:",u),this.openCloudProviderConsole(e,t.replace("".concat(e,":"),""));case 6:return n.a(2)}},n,this,[[1,5]])})),function(n,e,t,o){return c.apply(this,arguments)})},{key:"handleInstanceDelete",value:(s=d(i().m(function n(e,t,o){var a,r,s;return i().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.n=1,this.showDeleteConfirmation(o);case 1:if(n.v){n.n=2;break}return n.a(2);case 2:return(a=document.querySelector('[style*="position: fixed"]'))&&(a.style.opacity="0",a.style.transform="scale(0.95)",setTimeout(function(){return a.remove()},200)),this.showNotification("Deleting ".concat(o,"..."),"info"),n.p=3,n.n=4,chrome.runtime.sendMessage({action:"performResourceAction",resourceAction:"delete",resourceId:t});case 4:(r=n.v).success?(this.showNotification("".concat(o," deleted successfully"),"success"),this.refreshDashboard()):this.showNotification("Failed to delete ".concat(o,": ").concat(r.error||"Unknown error"),"error"),n.n=6;break;case 5:n.p=5,s=n.v,console.error("Error deleting instance:",s),this.showNotification("Error deleting ".concat(o,": ").concat(s.message),"error");case 6:return n.a(2)}},n,this,[[3,5]])})),function(n,e,t){return s.apply(this,arguments)})},{key:"openInstanceConsole",value:function(n,e){var t,o=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"us-east-1";switch(n){case"aws":var r=a||"us-east-1";t="https://".concat(r,".console.aws.amazon.com/ec2/home?region=").concat(r,"#InstanceDetails:instanceId=").concat(e);break;case"digitalocean":t="https://cloud.digitalocean.com/droplets/".concat(e);break;case"gcp":t="https://console.cloud.google.com/compute/instancesDetail/zones/us-central1-a/instances/".concat(e);break;case"azure":t="https://portal.azure.com/#@/resource/subscriptions/[subscription]/resourceGroups/[resourceGroup]/providers/Microsoft.Compute/virtualMachines/".concat(e,"/overview");break;default:return void this.showNotification("Console access not supported for this provider yet","warning")}var i=document.getElementById("provider-modal");i&&(i.classList.remove("show"),i.querySelector(".modal-content").classList.remove("show"),setTimeout(function(){return i.remove()},400)),chrome.tabs.create({url:t},function(){o.showNotification("Opened ".concat(n.toUpperCase()," console for this instance"),"info")})}},{key:"openCloudProviderConsole",value:function(n,e){this.openInstanceConsole(n,e)}},{key:"exportData",value:function(){var n=this;chrome.runtime.sendMessage({action:"refreshAllProviders"},function(e){if(e.success){var t={timestamp:(new Date).toISOString(),providers:e.data,settings:{}};chrome.storage.local.get(["settings"],function(e){t.settings=e.settings||{};var o=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),a=URL.createObjectURL(o),r=document.createElement("a");r.href=a,r.download="cloudhub-export-".concat((new Date).toISOString().split("T")[0],".json"),document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(a),n.showNotification("Data exported successfully!","success")})}else n.showNotification("Failed to export data","error")})}},{key:"launchInstance",value:(r=d(i().m(function n(e,t,o){var a,r,s=this;return i().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,chrome.runtime.sendMessage({action:"launchInstance",provider:e,instanceName:t,instanceSize:o});case 1:(a=n.v).success?(this.showNotification("".concat(t," launched successfully on ").concat(e.toUpperCase(),"!"),"success"),setTimeout(function(){return s.refreshDashboard()},3e3)):this.showNotification("Failed to launch instance: ".concat(a.error),"error"),n.n=3;break;case 2:n.p=2,r=n.v,console.error("Error launching instance:",r),this.showNotification("Error launching instance","error");case 3:return n.a(2)}},n,this,[[0,2]])})),function(n,e,t){return r.apply(this,arguments)})},{key:"getProviderDetailsData",value:(o=d(i().m(function n(e){var t,o,a,r;return i().w(function(n){for(;;)switch(n.p=n.n){case 0:if(t=Date.now()-(this.lastFetchTime||0),!(this.providerCache[e]&&t<3e4)){n.n=1;break}return console.log("[CloudHub] Using cached data for ".concat(e," (age: ").concat(Math.round(t/1e3),"s)")),o=this.providerCache[e],n.a(2,{icon:this.getProviderIcon(e),totalCost:o.estimatedCost||o.realCost||"0.00",resources:o.resources||[],costBreakdown:o.costBreakdown||[]});case 1:return console.log("[CloudHub] Cache miss for ".concat(e,", fetching fresh data")),n.p=2,n.n=3,chrome.runtime.sendMessage({action:"getProviderDetails",provider:e});case 3:if(!(a=n.v).success){n.n=4;break}return this.providerCache[e]=a.data,this.lastFetchTime=Date.now(),n.a(2,{icon:this.getProviderIcon(e),totalCost:a.data.estimatedCost||a.data.realCost||"0.00",resources:a.data.resources||[],costBreakdown:a.data.costBreakdown||[]});case 4:n.n=6;break;case 5:n.p=5,r=n.v,console.error("Error getting provider details:",r);case 6:return n.a(2,{icon:this.getProviderIcon(e),totalCost:"0.00",resources:[],costBreakdown:[]})}},n,this,[[2,5]])})),function(n){return o.apply(this,arguments)})},{key:"getProviderIcon",value:function(n){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]?'<img src="'.concat({aws:"icons/aws-icon.png",gcp:"icons/gcp-icon.png",azure:"icons/azure-icon.png",digitalocean:"icons/digitalocean-icon.png"}[n]||"icons/aws-icon.png",'" alt="').concat(n,'" class="provider-icon-img" style="width: 24px; height: 24px; margin-right: 8px; vertical-align: middle;" />'):{aws:"‚òÅÔ∏è",gcp:"üîµ",azure:"üî∑",digitalocean:"üíß"}[n]||"‚òÅÔ∏è"}},{key:"calculateEnhancedCost",value:function(n,e){if(!e||0===e.length)return"0.00";var t={aws:{"t2.nano":.0058,"t2.micro":.0116,"t2.small":.023,"t2.medium":.0464,"t3.micro":.0104,"t3.small":.0208,"m5.large":.096,default:.0116},digitalocean:{"s-1vcpu-1gb":5,"s-1vcpu-2gb":10,"s-2vcpu-2gb":15,"s-2vcpu-4gb":20,"s-4vcpu-8gb":40,default:10},gcp:{"f1-micro":.0076,"g1-small":.027,"n1-standard-1":.0475,"n1-standard-2":.095,default:.027},azure:{Standard_B1s:.0052,Standard_B1ms:.0104,Standard_B2s:.0208,Standard_D2s_v3:.096,default:.0104}},o=0;return e.forEach(function(e){var a=e.instanceType||e.size||"default";if("running"===e.status||"active"===e.status)if("digitalocean"===n){var r=t[n][a]||t[n].default;o+=r}else{var i=t[n][a]||t[n].default;o+=720*i}}),o.toFixed(2)}},{key:"clearAllData",value:function(){var n=this;confirm("Are you sure you want to clear all data? This will remove all credentials and settings.")&&chrome.storage.local.clear(function(){n.showNotification("All data cleared successfully","success"),setTimeout(function(){return window.location.reload()},1e3)})}}],t&&l(n.prototype,t),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,t,o,r,s,c,u,p,g,f,b,m,h,v,x,y}();console.log("[CloudHub] Setting up DOMContentLoaded listener..."),document.addEventListener("DOMContentLoaded",function(){console.log("[CloudHub] DOMContentLoaded fired, creating CloudHubPopup..."),new p}),console.log("[CloudHub] popup.js finished loading")})();