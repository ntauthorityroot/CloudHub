(()=>{function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},n(e)}function e(n,e){var o="undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(!o){if(Array.isArray(n)||(o=function(n,e){if(n){if("string"==typeof n)return t(n,e);var o={}.toString.call(n).slice(8,-1);return"Object"===o&&n.constructor&&(o=n.constructor.name),"Map"===o||"Set"===o?Array.from(n):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?t(n,e):void 0}}(n))||e&&n&&"number"==typeof n.length){o&&(n=o);var i=0,r=function(){};return{s:r,n:function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}},e:function(n){throw n},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,s=!1;return{s:function(){o=o.call(n)},n:function(){var n=o.next();return c=n.done,n},e:function(n){s=!0,a=n},f:function(){try{c||null==o.return||o.return()}finally{if(s)throw a}}}}function t(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,o=Array(e);t<e;t++)o[t]=n[t];return o}function o(n,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(n,i(o.key),o)}}function i(e){var t=function(e){if("object"!=n(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(t)?t:t+""}var r=function(){return n=function n(){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.currentProvider=this.detectCloudProvider(),this.init()},t=[{key:"init",value:function(){this.currentProvider&&(this.addProviderIntegration(),this.addQuickActionsButton(),this.observePageChanges())}},{key:"detectCloudProvider",value:function(){var n=window.location.hostname;return window.location.pathname,n.includes("aws.amazon.com")||n.includes("console.aws.amazon.com")?"aws":n.includes("console.cloud.google.com")?"gcp":n.includes("portal.azure.com")?"azure":n.includes("cloud.digitalocean.com")?"digitalocean":null}},{key:"addProviderIntegration",value:function(){switch(this.addStatusIndicator(),this.currentProvider){case"aws":this.addAWSIntegrations();break;case"gcp":this.addGCPIntegrations();break;case"azure":this.addAzureIntegrations();break;case"digitalocean":this.addDigitalOceanIntegrations()}}},{key:"addStatusIndicator",value:function(){}},{key:"addQuickActionsButton",value:function(){}},{key:"handleQuickAction",value:function(n){switch(n){case"refresh":this.refreshCurrentPage();break;case"costs":this.showCostOverlay();break;case"security":this.runSecurityCheck();break;case"ssh":this.showSSHConnections()}document.getElementById("cloudhub-actions-menu").style.display="none"}},{key:"addAWSIntegrations",value:function(){this.addAWSInstanceActions(),this.addAWSCostEstimates(),this.addAWSSecurityHighlights()}},{key:"addAWSInstanceActions",value:function(){var n=this,e=function(){document.querySelectorAll('[data-testid="instances-table"] tbody tr').forEach(function(e){if(!e.querySelector(".cloudhub-actions")){var t=n.extractAWSInstanceId(e);if(t){var o=e.querySelector("td:last-child");if(o){var i=document.createElement("div");i.className="cloudhub-actions",i.innerHTML='\n              <button class="cloudhub-btn cloudhub-ssh-btn" data-instance-id="'.concat(t,'" \n                style="background: #007bff; color: white; border: none; padding: 4px 8px; margin: 0 2px; border-radius: 3px; font-size: 11px; cursor: pointer;">\n                ⚡ SSH\n              </button>\n            '),i.querySelector(".cloudhub-ssh-btn").addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),n.handleSSHConnect(t)}),o.appendChild(i)}}}})};setTimeout(e,1e3),new MutationObserver(e).observe(document.body,{childList:!0,subtree:!0})}},{key:"extractAWSInstanceId",value:function(n){var t,o=e(n.querySelectorAll("td"));try{for(o.s();!(t=o.n()).done;){var i=t.value.textContent.trim();if(i.match(/i-[0-9a-f]{8,17}/))return i.match(/i-[0-9a-f]{8,17}/)[0]}}catch(n){o.e(n)}finally{o.f()}return null}},{key:"addAWSCostEstimates",value:function(){setTimeout(function(){document.querySelectorAll('[data-testid="instance-id"]').forEach(function(n){return function(n){if(!n.querySelector(".cloudhub-cost-badge")){var e=document.createElement("span");e.className="cloudhub-cost-badge",e.innerHTML='<span style="background: #28a745; color: white; padding: 2px 6px; border-radius: 10px; font-size: 10px; margin-left: 8px;">~$'.concat("23.45","/mo</span>"),n.appendChild(e)}}(n)})},2e3)}},{key:"addAWSSecurityHighlights",value:function(){var n=function(){document.querySelectorAll('a[href*="securityGroups"]').forEach(function(n){if((n.textContent.includes("0.0.0.0/0")||n.textContent.includes("All traffic"))&&!n.querySelector(".cloudhub-security-warning")){var e=document.createElement("span");e.className="cloudhub-security-warning",e.innerHTML=" ⚠️",e.style.color="#ffc107",e.title="CloudHub: Potential security risk - open to all IPs",n.appendChild(e)}})};setTimeout(n,1500),new MutationObserver(n).observe(document.body,{childList:!0,subtree:!0})}},{key:"addGCPIntegrations",value:function(){this.addGCPInstanceActions()}},{key:"addGCPInstanceActions",value:function(){var n=this,e=function(){document.querySelectorAll('[data-test-id="vm-instances-table"] tbody tr').forEach(function(e){if(!e.querySelector(".cloudhub-actions")){var t=n.extractGCPInstanceName(e);if(t){var o=e.querySelector("td:last-child");if(o){var i=document.createElement("div");i.className="cloudhub-actions",i.innerHTML='\n              <button class="cloudhub-btn cloudhub-ssh-btn" data-instance-name="'.concat(t,'"\n                style="background: #4285f4; color: white; border: none; padding: 4px 8px; margin: 0 2px; border-radius: 3px; font-size: 11px; cursor: pointer;">\n                ⚡ SSH\n              </button>\n            '),i.querySelector(".cloudhub-ssh-btn").addEventListener("click",function(e){e.preventDefault(),e.stopPropagation(),n.handleSSHConnect(t)}),o.appendChild(i)}}}})};setTimeout(e,1e3),new MutationObserver(e).observe(document.body,{childList:!0,subtree:!0})}},{key:"extractGCPInstanceName",value:function(n){var e=n.querySelector("td:first-child");return e?e.textContent.trim():null}},{key:"addAzureIntegrations",value:function(){console.log("Adding Azure integrations...")}},{key:"addDigitalOceanIntegrations",value:function(){console.log("Adding DigitalOcean integrations..."),this.addDigitalOceanDropletActions()}},{key:"addDigitalOceanDropletActions",value:function(){var n=this,e=function(){document.querySelectorAll('[data-testid="droplet-row"], .droplets-table tbody tr, table[aria-label*="Droplets"] tbody tr').forEach(function(e){if(!e.querySelector(".cloudhub-actions")){var t=n.extractDigitalOceanDropletName(e);if(t){var o=e.querySelector("td:last-child")||e.querySelector(".actions-cell");if(o){var i=document.createElement("div");i.className="cloudhub-actions",i.innerHTML='\n              <button class="cloudhub-btn cloudhub-ssh-btn" data-droplet-name="'.concat(t,'"\n                style="background: #0080ff; color: white; border: none; padding: 4px 8px; margin: 0 2px; border-radius: 3px; font-size: 11px; cursor: pointer;">\n                ⚡ SSH\n              </button>\n            '),i.querySelector(".cloudhub-ssh-btn").addEventListener("click",function(o){o.preventDefault(),o.stopPropagation(),n.handleDigitalOceanSSH(t,e)}),o.appendChild(i)}}}})};setTimeout(e,1e3),new MutationObserver(e).observe(document.body,{childList:!0,subtree:!0})}},{key:"extractDigitalOceanDropletName",value:function(n){for(var e=0,t=["td:first-child a",".droplet-name a","td:first-child",'[data-testid="droplet-name"]'];e<t.length;e++){var o=t[e],i=n.querySelector(o);if(i){var r=i.textContent.trim();if(r&&"Name"!==r&&"Droplet"!==r)return r}}return null}},{key:"handleDigitalOceanSSH",value:function(n,e){var t=this;console.log("CloudHub: Initiating SSH connection to ".concat(n));var o=e.querySelector('td:first-child a, .droplet-name a, [data-testid="droplet-name"] a');o?(this.showNotification("Opening ".concat(n," console..."),"info"),o.click(),setTimeout(function(){t.findAndClickDropletConsole(n)},2e3)):chrome.runtime.sendMessage({action:"getDropletSSHInfo",dropletName:n},function(e){e.success&&e.dropletUrl?(window.open(e.dropletUrl,"_blank"),setTimeout(function(){t.findAndClickDropletConsole(n)},3e3)):t.showNotification("Could not open SSH console for "+n,"error")})}},{key:"findAndClickDropletConsole",value:function(n){var e=this;console.log("CloudHub: Looking for SSH console button for ".concat(n));var t=document.querySelector('a[href*="/access"], button[aria-label*="Access"], .tab-access, [data-testid="access-tab"]');t?(console.log("CloudHub: Found Access tab, clicking..."),t.click(),setTimeout(function(){e.findLaunchConsoleButton(n)},1500)):this.findLaunchConsoleButton(n)}},{key:"findLaunchConsoleButton",value:function(n){var t,o=null,i=e(document.querySelectorAll("button"));try{for(i.s();!(t=i.n()).done;){var r=t.value,a=r.textContent.trim().toLowerCase();if(a.includes("launch")&&(a.includes("console")||a.includes("droplet"))){o=r;break}}}catch(n){i.e(n)}finally{i.f()}if(o||(o=document.querySelector("button.Button--blue[data-ember-action]"))&&!o.textContent.toLowerCase().includes("console")&&(o=null),o){console.log("CloudHub: Found Launch Droplet Console button, clicking..."),this.showNotification("Launching SSH console for ".concat(n,"..."),"success");var c=document.querySelector('input[placeholder*="Log in as"], input[placeholder*="Username"], .FloatLabel-input');c&&!c.value&&(c.value="root",c.dispatchEvent(new Event("input",{bubbles:!0}))),o.click(),this.showNotification("SSH console launched for ".concat(n,"!"),"success")}else{console.log("CloudHub: Launch Droplet Console button not found"),this.showNotification("Could not find SSH console button for ".concat(n,". Please navigate to Access tab manually."),"warning");var s=Array.from(document.querySelectorAll("button")).map(function(n){return n.textContent.trim()}).filter(function(n){return n});console.log("CloudHub: Available buttons:",s)}}},{key:"handleSSHConnect",value:function(n){var e=this;chrome.storage.local.get(["settings"],function(t){var o=(t.settings||{}).sshMethod||"clipboard";chrome.runtime.sendMessage({action:"getSSHCommand",resourceId:n,provider:e.currentProvider},function(n){n.success?e.executeSSHConnection(n.command,o):e.showNotification("Failed to get SSH command: "+n.error,"error")})})}},{key:"executeSSHConnection",value:function(n,e){var t=this;switch(e){case"clipboard":navigator.clipboard.writeText(n).then(function(){t.showNotification("SSH command copied to clipboard!","success")});break;case"terminal":var o="terminal://run/".concat(encodeURIComponent(n));window.open(o,"_blank");break;case"browser":this.openBrowserSSH(n)}}},{key:"openBrowserSSH",value:function(n){var e=document.createElement("div");e.innerHTML='\n      <div style="\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0,0,0,0.8);\n        z-index: 10001;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n      " id="cloudhub-ssh-modal">\n        <div style="\n          background: #1e1e1e;\n          color: #00ff00;\n          padding: 20px;\n          border-radius: 8px;\n          width: 80%;\n          height: 60%;\n          font-family: monospace;\n          overflow: auto;\n        ">\n          <div style="margin-bottom: 10px; color: white;">\n            CloudHub SSH Connection\n            <button id="ssh-modal-close" style="float: right; background: #dc3545; color: white; border: none; padding: 5px 10px; border-radius: 3px; cursor: pointer;">Close</button>\n          </div>\n          <div style="background: #000; padding: 10px; border-radius: 4px; margin-bottom: 10px;">\n            Command: '.concat(n,'\n          </div>\n          <div style="color: #888; font-size: 12px;">\n            Note: This is a demonstration. In a production version, this would integrate with a web-based SSH client like Xterm.js\n          </div>\n        </div>\n      </div>\n    '),document.body.appendChild(e),document.getElementById("ssh-modal-close").addEventListener("click",function(){e.remove()})}},{key:"refreshCurrentPage",value:function(){this.showNotification("Refreshing page data...","info"),window.location.reload()}},{key:"showCostOverlay",value:function(){var n=this;chrome.runtime.sendMessage({action:"getCostData",provider:this.currentProvider},function(e){e.success&&n.displayCostOverlay(e.data)})}},{key:"displayCostOverlay",value:function(n){var e=document.createElement("div");e.innerHTML='\n      <div style="\n        position: fixed;\n        top: 50px;\n        right: 10px;\n        background: white;\n        border-radius: 8px;\n        box-shadow: 0 4px 20px rgba(0,0,0,0.15);\n        padding: 16px;\n        z-index: 10000;\n        min-width: 250px;\n        font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, sans-serif;\n      " id="cloudhub-cost-overlay">\n        <div style="font-size: 14px; font-weight: 600; margin-bottom: 8px; color: #333;">\n          💰 Cost Overview\n          <button id="cost-overlay-close" style="float: right; background: none; border: none; font-size: 16px; cursor: pointer;">×</button>\n        </div>\n        <div style="font-size: 12px; color: #666; margin-bottom: 12px;">Current Month Estimate</div>\n        <div style="font-size: 24px; font-weight: 600; color: #28a745; margin-bottom: 8px;">$45.67</div>\n        <div style="font-size: 11px; color: #888;">Last updated: '.concat((new Date).toLocaleTimeString(),"</div>\n      </div>\n    "),document.body.appendChild(e),document.getElementById("cost-overlay-close").addEventListener("click",function(){e.remove()}),setTimeout(function(){e.parentNode&&e.remove()},5e3)}},{key:"runSecurityCheck",value:function(){var n=this;this.showNotification("Running security check...","info"),setTimeout(function(){var e=Math.floor(3*Math.random());e>0?n.showNotification("Found ".concat(e," potential security issue(s)"),"warning"):n.showNotification("No security issues found","success")},2e3)}},{key:"showSSHConnections",value:function(){var n=this;chrome.runtime.sendMessage({action:"getSSHConnections",provider:this.currentProvider},function(e){e.success&&n.displaySSHOptions(e.connections)})}},{key:"displaySSHOptions",value:function(n){var e=this,t=document.createElement("div");t.innerHTML='\n      <div style="\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background: rgba(0,0,0,0.5);\n        z-index: 10001;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n      " id="cloudhub-ssh-connections">\n        <div style="\n          background: white;\n          border-radius: 8px;\n          padding: 20px;\n          max-width: 400px;\n          width: 90%;\n          font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', Roboto, sans-serif;\n        ">\n          <h3 style="margin: 0 0 16px 0;">SSH Connections</h3>\n          <div style="margin-bottom: 16px; color: #666; font-size: 14px;">\n            Available instances for SSH connection:\n          </div>\n          <div style="color: #333; font-size: 14px; margin-bottom: 12px;">\n            Select an instance to connect via SSH:\n          </div>\n          <div style="max-height: 200px; overflow-y: auto;">\n            <div class="ssh-instance-item" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 8px; cursor: pointer;" data-instance="web-server-01">\n              <strong>web-server-01</strong><br>\n              <small>54.123.45.67 • Running</small>\n            </div>\n            <div class="ssh-instance-item" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 8px; cursor: pointer;" data-instance="api-server">\n              <strong>api-server</strong><br>\n              <small>64.123.45.67 • Running</small>\n            </div>\n            <div class="ssh-instance-item" style="padding: 8px; border: 1px solid #ddd; border-radius: 4px; margin-bottom: 8px; cursor: pointer;" data-instance="production-vm">\n              <strong>production-vm</strong><br>\n              <small>20.123.45.67 • Running</small>\n            </div>\n          </div>\n          <button id="ssh-connections-close" style="\n            background: #667eea;\n            color: white;\n            border: none;\n            padding: 8px 16px;\n            border-radius: 4px;\n            cursor: pointer;\n            width: 100%;\n          ">\n            Close\n          </button>\n        </div>\n      </div>\n    ',document.body.appendChild(t),t.querySelectorAll(".ssh-instance-item").forEach(function(n){n.addEventListener("click",function(){n.style.background="#f0f8ff";var t=n.dataset.instance;e.showNotification("SSH to ".concat(t," - Feature ready for integration"),"info")})}),document.getElementById("ssh-connections-close").addEventListener("click",function(){t.remove()})}},{key:"observePageChanges",value:function(){var n=this,e=location.href;new MutationObserver(function(){var t=location.href;t!==e&&(e=t,setTimeout(function(){return n.addProviderIntegration()},1e3))}).observe(document.body,{childList:!0,subtree:!0})}},{key:"showNotification",value:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",t=document.createElement("div");t.style.cssText="\n      position: fixed;\n      top: 20px;\n      right: 20px;\n      background: ".concat("success"===e?"#28a745":"error"===e?"#dc3545":"warning"===e?"#ffc107":"#007bff",";\n      color: ").concat("warning"===e?"#000":"#fff",";\n      padding: 12px 16px;\n      border-radius: 4px;\n      z-index: 10002;\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n      font-size: 14px;\n      box-shadow: 0 2px 10px rgba(0,0,0,0.1);\n      animation: slideIn 0.3s ease;\n    "),t.textContent=n,document.body.appendChild(t),setTimeout(function(){t.remove()},4e3)}}],t&&o(n.prototype,t),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,t}();"loading"===document.readyState?document.addEventListener("DOMContentLoaded",function(){new r}):new r})();